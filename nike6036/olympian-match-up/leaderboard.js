(()=>{var C0=Object.create;var yo=Object.defineProperty;var L0=Object.getOwnPropertyDescriptor;var k0=Object.getOwnPropertyNames;var P0=Object.getPrototypeOf,$0=Object.prototype.hasOwnProperty;var U0=(s,n)=>()=>(s&&(n=s(s=0)),n);var Uc=(s,n)=>()=>(n||s((n={exports:{}}).exports,n),n.exports),D0=(s,n)=>{for(var r in n)yo(s,r,{get:n[r],enumerable:!0})},M0=(s,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of k0(n))!$0.call(s,u)&&u!==r&&yo(s,u,{get:()=>n[u],enumerable:!(o=L0(n,u))||o.enumerable});return s};var bo=(s,n,r)=>(r=s!=null?C0(P0(s)):{},M0(n||!s||!s.__esModule?yo(r,"default",{value:s,enumerable:!0}):r,s));var Mo=Uc((Rn,dr)=>{(function(){var s,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,g="__lodash_placeholder__",v=1,m=2,S=4,O=1,I=2,C=1,$=2,F=4,H=8,re=16,Z=32,X=64,le=128,Ee=256,we=512,st=30,ot="...",$r=800,Hn=16,_t=1,ra=2,Le=3,je=1/0,Ze=9007199254740991,jl=17976931348623157e292,Ur=NaN,at=4294967295,Bl=at-1,Wl=at>>>1,Hl=[["ary",le],["bind",C],["bindKey",$],["curry",H],["curryRight",re],["flip",we],["partial",Z],["partialRight",X],["rearg",Ee]],fn="[object Arguments]",Dr="[object Array]",Gl="[object AsyncFunction]",Gn="[object Boolean]",qn="[object Date]",ql="[object DOMException]",Mr="[object Error]",Nr="[object Function]",ia="[object GeneratorFunction]",Qe="[object Map]",zn="[object Number]",zl="[object Null]",vt="[object Object]",sa="[object Promise]",Kl="[object Proxy]",Kn="[object RegExp]",et="[object Set]",Jn="[object String]",Fr="[object Symbol]",Jl="[object Undefined]",Yn="[object WeakMap]",Yl="[object WeakSet]",Vn="[object ArrayBuffer]",dn="[object DataView]",Zi="[object Float32Array]",Qi="[object Float64Array]",es="[object Int8Array]",ts="[object Int16Array]",ns="[object Int32Array]",rs="[object Uint8Array]",is="[object Uint8ClampedArray]",ss="[object Uint16Array]",os="[object Uint32Array]",Vl=/\b__p \+= '';/g,Xl=/\b(__p \+=) '' \+/g,Zl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oa=/&(?:amp|lt|gt|quot|#39);/g,aa=/[&<>"']/g,Ql=RegExp(oa.source),eh=RegExp(aa.source),th=/<%-([\s\S]+?)%>/g,nh=/<%([\s\S]+?)%>/g,ua=/<%=([\s\S]+?)%>/g,rh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ih=/^\w*$/,sh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,as=/[\\^$.*+?()[\]{}|]/g,oh=RegExp(as.source),us=/^\s+/,ah=/\s/,uh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ch=/\{\n\/\* \[wrapped with (.+)\] \*/,lh=/,? & /,hh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fh=/[()=,{}\[\]\/\s]/,dh=/\\(\\)?/g,ph=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ca=/\w*$/,gh=/^[-+]0x[0-9a-f]+$/i,_h=/^0b[01]+$/i,vh=/^\[object .+?Constructor\]$/,mh=/^0o[0-7]+$/i,wh=/^(?:0|[1-9]\d*)$/,yh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jr=/($^)/,bh=/['\n\r\u2028\u2029\\]/g,Br="\\ud800-\\udfff",xh="\\u0300-\\u036f",Sh="\\ufe20-\\ufe2f",Ah="\\u20d0-\\u20ff",la=xh+Sh+Ah,ha="\\u2700-\\u27bf",fa="a-z\\xdf-\\xf6\\xf8-\\xff",Eh="\\xac\\xb1\\xd7\\xf7",Th="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rh="\\u2000-\\u206f",Oh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",da="A-Z\\xc0-\\xd6\\xd8-\\xde",pa="\\ufe0e\\ufe0f",ga=Eh+Th+Rh+Oh,cs="['\u2019]",Ih="["+Br+"]",_a="["+ga+"]",Wr="["+la+"]",va="\\d+",Ch="["+ha+"]",ma="["+fa+"]",wa="[^"+Br+ga+va+ha+fa+da+"]",ls="\\ud83c[\\udffb-\\udfff]",Lh="(?:"+Wr+"|"+ls+")",ya="[^"+Br+"]",hs="(?:\\ud83c[\\udde6-\\uddff]){2}",fs="[\\ud800-\\udbff][\\udc00-\\udfff]",pn="["+da+"]",ba="\\u200d",xa="(?:"+ma+"|"+wa+")",kh="(?:"+pn+"|"+wa+")",Sa="(?:"+cs+"(?:d|ll|m|re|s|t|ve))?",Aa="(?:"+cs+"(?:D|LL|M|RE|S|T|VE))?",Ea=Lh+"?",Ta="["+pa+"]?",Ph="(?:"+ba+"(?:"+[ya,hs,fs].join("|")+")"+Ta+Ea+")*",$h="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Uh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ra=Ta+Ea+Ph,Dh="(?:"+[Ch,hs,fs].join("|")+")"+Ra,Mh="(?:"+[ya+Wr+"?",Wr,hs,fs,Ih].join("|")+")",Nh=RegExp(cs,"g"),Fh=RegExp(Wr,"g"),ds=RegExp(ls+"(?="+ls+")|"+Mh+Ra,"g"),jh=RegExp([pn+"?"+ma+"+"+Sa+"(?="+[_a,pn,"$"].join("|")+")",kh+"+"+Aa+"(?="+[_a,pn+xa,"$"].join("|")+")",pn+"?"+xa+"+"+Sa,pn+"+"+Aa,Uh,$h,va,Dh].join("|"),"g"),Bh=RegExp("["+ba+Br+la+pa+"]"),Wh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gh=-1,oe={};oe[Zi]=oe[Qi]=oe[es]=oe[ts]=oe[ns]=oe[rs]=oe[is]=oe[ss]=oe[os]=!0,oe[fn]=oe[Dr]=oe[Vn]=oe[Gn]=oe[dn]=oe[qn]=oe[Mr]=oe[Nr]=oe[Qe]=oe[zn]=oe[vt]=oe[Kn]=oe[et]=oe[Jn]=oe[Yn]=!1;var ie={};ie[fn]=ie[Dr]=ie[Vn]=ie[dn]=ie[Gn]=ie[qn]=ie[Zi]=ie[Qi]=ie[es]=ie[ts]=ie[ns]=ie[Qe]=ie[zn]=ie[vt]=ie[Kn]=ie[et]=ie[Jn]=ie[Fr]=ie[rs]=ie[is]=ie[ss]=ie[os]=!0,ie[Mr]=ie[Nr]=ie[Yn]=!1;var qh={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},zh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yh=parseFloat,Vh=parseInt,Oa=typeof global=="object"&&global&&global.Object===Object&&global,Xh=typeof self=="object"&&self&&self.Object===Object&&self,ge=Oa||Xh||Function("return this")(),ps=typeof Rn=="object"&&Rn&&!Rn.nodeType&&Rn,Gt=ps&&typeof dr=="object"&&dr&&!dr.nodeType&&dr,Ia=Gt&&Gt.exports===ps,gs=Ia&&Oa.process,Be=function(){try{var y=Gt&&Gt.require&&Gt.require("util").types;return y||gs&&gs.binding&&gs.binding("util")}catch{}}(),Ca=Be&&Be.isArrayBuffer,La=Be&&Be.isDate,ka=Be&&Be.isMap,Pa=Be&&Be.isRegExp,$a=Be&&Be.isSet,Ua=Be&&Be.isTypedArray;function ke(y,A,x){switch(x.length){case 0:return y.call(A);case 1:return y.call(A,x[0]);case 2:return y.call(A,x[0],x[1]);case 3:return y.call(A,x[0],x[1],x[2])}return y.apply(A,x)}function Zh(y,A,x,k){for(var j=-1,Q=y==null?0:y.length;++j<Q;){var de=y[j];A(k,de,x(de),y)}return k}function We(y,A){for(var x=-1,k=y==null?0:y.length;++x<k&&A(y[x],x,y)!==!1;);return y}function Qh(y,A){for(var x=y==null?0:y.length;x--&&A(y[x],x,y)!==!1;);return y}function Da(y,A){for(var x=-1,k=y==null?0:y.length;++x<k;)if(!A(y[x],x,y))return!1;return!0}function Lt(y,A){for(var x=-1,k=y==null?0:y.length,j=0,Q=[];++x<k;){var de=y[x];A(de,x,y)&&(Q[j++]=de)}return Q}function Hr(y,A){var x=y==null?0:y.length;return!!x&&gn(y,A,0)>-1}function _s(y,A,x){for(var k=-1,j=y==null?0:y.length;++k<j;)if(x(A,y[k]))return!0;return!1}function ae(y,A){for(var x=-1,k=y==null?0:y.length,j=Array(k);++x<k;)j[x]=A(y[x],x,y);return j}function kt(y,A){for(var x=-1,k=A.length,j=y.length;++x<k;)y[j+x]=A[x];return y}function vs(y,A,x,k){var j=-1,Q=y==null?0:y.length;for(k&&Q&&(x=y[++j]);++j<Q;)x=A(x,y[j],j,y);return x}function ef(y,A,x,k){var j=y==null?0:y.length;for(k&&j&&(x=y[--j]);j--;)x=A(x,y[j],j,y);return x}function ms(y,A){for(var x=-1,k=y==null?0:y.length;++x<k;)if(A(y[x],x,y))return!0;return!1}var tf=ws("length");function nf(y){return y.split("")}function rf(y){return y.match(hh)||[]}function Ma(y,A,x){var k;return x(y,function(j,Q,de){if(A(j,Q,de))return k=Q,!1}),k}function Gr(y,A,x,k){for(var j=y.length,Q=x+(k?1:-1);k?Q--:++Q<j;)if(A(y[Q],Q,y))return Q;return-1}function gn(y,A,x){return A===A?_f(y,A,x):Gr(y,Na,x)}function sf(y,A,x,k){for(var j=x-1,Q=y.length;++j<Q;)if(k(y[j],A))return j;return-1}function Na(y){return y!==y}function Fa(y,A){var x=y==null?0:y.length;return x?bs(y,A)/x:Ur}function ws(y){return function(A){return A==null?s:A[y]}}function ys(y){return function(A){return y==null?s:y[A]}}function ja(y,A,x,k,j){return j(y,function(Q,de,ne){x=k?(k=!1,Q):A(x,Q,de,ne)}),x}function of(y,A){var x=y.length;for(y.sort(A);x--;)y[x]=y[x].value;return y}function bs(y,A){for(var x,k=-1,j=y.length;++k<j;){var Q=A(y[k]);Q!==s&&(x=x===s?Q:x+Q)}return x}function xs(y,A){for(var x=-1,k=Array(y);++x<y;)k[x]=A(x);return k}function af(y,A){return ae(A,function(x){return[x,y[x]]})}function Ba(y){return y&&y.slice(0,qa(y)+1).replace(us,"")}function Pe(y){return function(A){return y(A)}}function Ss(y,A){return ae(A,function(x){return y[x]})}function Xn(y,A){return y.has(A)}function Wa(y,A){for(var x=-1,k=y.length;++x<k&&gn(A,y[x],0)>-1;);return x}function Ha(y,A){for(var x=y.length;x--&&gn(A,y[x],0)>-1;);return x}function uf(y,A){for(var x=y.length,k=0;x--;)y[x]===A&&++k;return k}var cf=ys(qh),lf=ys(zh);function hf(y){return"\\"+Jh[y]}function ff(y,A){return y==null?s:y[A]}function _n(y){return Bh.test(y)}function df(y){return Wh.test(y)}function pf(y){for(var A,x=[];!(A=y.next()).done;)x.push(A.value);return x}function As(y){var A=-1,x=Array(y.size);return y.forEach(function(k,j){x[++A]=[j,k]}),x}function Ga(y,A){return function(x){return y(A(x))}}function Pt(y,A){for(var x=-1,k=y.length,j=0,Q=[];++x<k;){var de=y[x];(de===A||de===g)&&(y[x]=g,Q[j++]=x)}return Q}function qr(y){var A=-1,x=Array(y.size);return y.forEach(function(k){x[++A]=k}),x}function gf(y){var A=-1,x=Array(y.size);return y.forEach(function(k){x[++A]=[k,k]}),x}function _f(y,A,x){for(var k=x-1,j=y.length;++k<j;)if(y[k]===A)return k;return-1}function vf(y,A,x){for(var k=x+1;k--;)if(y[k]===A)return k;return k}function vn(y){return _n(y)?wf(y):tf(y)}function tt(y){return _n(y)?yf(y):nf(y)}function qa(y){for(var A=y.length;A--&&ah.test(y.charAt(A)););return A}var mf=ys(Kh);function wf(y){for(var A=ds.lastIndex=0;ds.test(y);)++A;return A}function yf(y){return y.match(ds)||[]}function bf(y){return y.match(jh)||[]}var xf=function y(A){A=A==null?ge:$t.defaults(ge.Object(),A,$t.pick(ge,Hh));var x=A.Array,k=A.Date,j=A.Error,Q=A.Function,de=A.Math,ne=A.Object,Es=A.RegExp,Sf=A.String,He=A.TypeError,zr=x.prototype,Af=Q.prototype,mn=ne.prototype,Kr=A["__core-js_shared__"],Jr=Af.toString,te=mn.hasOwnProperty,Ef=0,za=function(){var e=/[^.]+$/.exec(Kr&&Kr.keys&&Kr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Yr=mn.toString,Tf=Jr.call(ne),Rf=ge._,Of=Es("^"+Jr.call(te).replace(as,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vr=Ia?A.Buffer:s,Ut=A.Symbol,Xr=A.Uint8Array,Ka=Vr?Vr.allocUnsafe:s,Zr=Ga(ne.getPrototypeOf,ne),Ja=ne.create,Ya=mn.propertyIsEnumerable,Qr=zr.splice,Va=Ut?Ut.isConcatSpreadable:s,Zn=Ut?Ut.iterator:s,qt=Ut?Ut.toStringTag:s,ei=function(){try{var e=Vt(ne,"defineProperty");return e({},"",{}),e}catch{}}(),If=A.clearTimeout!==ge.clearTimeout&&A.clearTimeout,Cf=k&&k.now!==ge.Date.now&&k.now,Lf=A.setTimeout!==ge.setTimeout&&A.setTimeout,ti=de.ceil,ni=de.floor,Ts=ne.getOwnPropertySymbols,kf=Vr?Vr.isBuffer:s,Xa=A.isFinite,Pf=zr.join,$f=Ga(ne.keys,ne),pe=de.max,ye=de.min,Uf=k.now,Df=A.parseInt,Za=de.random,Mf=zr.reverse,Rs=Vt(A,"DataView"),Qn=Vt(A,"Map"),Os=Vt(A,"Promise"),wn=Vt(A,"Set"),er=Vt(A,"WeakMap"),tr=Vt(ne,"create"),ri=er&&new er,yn={},Nf=Xt(Rs),Ff=Xt(Qn),jf=Xt(Os),Bf=Xt(wn),Wf=Xt(er),ii=Ut?Ut.prototype:s,nr=ii?ii.valueOf:s,Qa=ii?ii.toString:s;function f(e){if(ce(e)&&!B(e)&&!(e instanceof Y)){if(e instanceof Ge)return e;if(te.call(e,"__wrapped__"))return ec(e)}return new Ge(e)}var bn=function(){function e(){}return function(t){if(!ue(t))return{};if(Ja)return Ja(t);e.prototype=t;var i=new e;return e.prototype=s,i}}();function si(){}function Ge(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}f.templateSettings={escape:th,evaluate:nh,interpolate:ua,variable:"",imports:{_:f}},f.prototype=si.prototype,f.prototype.constructor=f,Ge.prototype=bn(si.prototype),Ge.prototype.constructor=Ge;function Y(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=at,this.__views__=[]}function Hf(){var e=new Y(this.__wrapped__);return e.__actions__=Te(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Te(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Te(this.__views__),e}function Gf(){if(this.__filtered__){var e=new Y(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function qf(){var e=this.__wrapped__.value(),t=this.__dir__,i=B(e),a=t<0,l=i?e.length:0,d=rp(0,l,this.__views__),_=d.start,w=d.end,b=w-_,E=a?w:_-1,T=this.__iteratees__,R=T.length,L=0,P=ye(b,this.__takeCount__);if(!i||!a&&l==b&&P==b)return Su(e,this.__actions__);var D=[];e:for(;b--&&L<P;){E+=t;for(var G=-1,M=e[E];++G<R;){var K=T[G],V=K.iteratee,De=K.type,Ae=V(M);if(De==ra)M=Ae;else if(!Ae){if(De==_t)continue e;break e}}D[L++]=M}return D}Y.prototype=bn(si.prototype),Y.prototype.constructor=Y;function zt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function zf(){this.__data__=tr?tr(null):{},this.size=0}function Kf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Jf(e){var t=this.__data__;if(tr){var i=t[e];return i===h?s:i}return te.call(t,e)?t[e]:s}function Yf(e){var t=this.__data__;return tr?t[e]!==s:te.call(t,e)}function Vf(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=tr&&t===s?h:t,this}zt.prototype.clear=zf,zt.prototype.delete=Kf,zt.prototype.get=Jf,zt.prototype.has=Yf,zt.prototype.set=Vf;function mt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Xf(){this.__data__=[],this.size=0}function Zf(e){var t=this.__data__,i=oi(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():Qr.call(t,i,1),--this.size,!0}function Qf(e){var t=this.__data__,i=oi(t,e);return i<0?s:t[i][1]}function ed(e){return oi(this.__data__,e)>-1}function td(e,t){var i=this.__data__,a=oi(i,e);return a<0?(++this.size,i.push([e,t])):i[a][1]=t,this}mt.prototype.clear=Xf,mt.prototype.delete=Zf,mt.prototype.get=Qf,mt.prototype.has=ed,mt.prototype.set=td;function wt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function nd(){this.size=0,this.__data__={hash:new zt,map:new(Qn||mt),string:new zt}}function rd(e){var t=mi(this,e).delete(e);return this.size-=t?1:0,t}function id(e){return mi(this,e).get(e)}function sd(e){return mi(this,e).has(e)}function od(e,t){var i=mi(this,e),a=i.size;return i.set(e,t),this.size+=i.size==a?0:1,this}wt.prototype.clear=nd,wt.prototype.delete=rd,wt.prototype.get=id,wt.prototype.has=sd,wt.prototype.set=od;function Kt(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new wt;++t<i;)this.add(e[t])}function ad(e){return this.__data__.set(e,h),this}function ud(e){return this.__data__.has(e)}Kt.prototype.add=Kt.prototype.push=ad,Kt.prototype.has=ud;function nt(e){var t=this.__data__=new mt(e);this.size=t.size}function cd(){this.__data__=new mt,this.size=0}function ld(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function hd(e){return this.__data__.get(e)}function fd(e){return this.__data__.has(e)}function dd(e,t){var i=this.__data__;if(i instanceof mt){var a=i.__data__;if(!Qn||a.length<r-1)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new wt(a)}return i.set(e,t),this.size=i.size,this}nt.prototype.clear=cd,nt.prototype.delete=ld,nt.prototype.get=hd,nt.prototype.has=fd,nt.prototype.set=dd;function eu(e,t){var i=B(e),a=!i&&Zt(e),l=!i&&!a&&jt(e),d=!i&&!a&&!l&&En(e),_=i||a||l||d,w=_?xs(e.length,Sf):[],b=w.length;for(var E in e)(t||te.call(e,E))&&!(_&&(E=="length"||l&&(E=="offset"||E=="parent")||d&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||St(E,b)))&&w.push(E);return w}function tu(e){var t=e.length;return t?e[Fs(0,t-1)]:s}function pd(e,t){return wi(Te(e),Jt(t,0,e.length))}function gd(e){return wi(Te(e))}function Is(e,t,i){(i!==s&&!rt(e[t],i)||i===s&&!(t in e))&&yt(e,t,i)}function rr(e,t,i){var a=e[t];(!(te.call(e,t)&&rt(a,i))||i===s&&!(t in e))&&yt(e,t,i)}function oi(e,t){for(var i=e.length;i--;)if(rt(e[i][0],t))return i;return-1}function _d(e,t,i,a){return Dt(e,function(l,d,_){t(a,l,i(l),_)}),a}function nu(e,t){return e&&ct(t,_e(t),e)}function vd(e,t){return e&&ct(t,Oe(t),e)}function yt(e,t,i){t=="__proto__"&&ei?ei(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Cs(e,t){for(var i=-1,a=t.length,l=x(a),d=e==null;++i<a;)l[i]=d?s:lo(e,t[i]);return l}function Jt(e,t,i){return e===e&&(i!==s&&(e=e<=i?e:i),t!==s&&(e=e>=t?e:t)),e}function qe(e,t,i,a,l,d){var _,w=t&v,b=t&m,E=t&S;if(i&&(_=l?i(e,a,l,d):i(e)),_!==s)return _;if(!ue(e))return e;var T=B(e);if(T){if(_=sp(e),!w)return Te(e,_)}else{var R=be(e),L=R==Nr||R==ia;if(jt(e))return Tu(e,w);if(R==vt||R==fn||L&&!l){if(_=b||L?{}:qu(e),!w)return b?Jd(e,vd(_,e)):Kd(e,nu(_,e))}else{if(!ie[R])return l?e:{};_=op(e,R,w)}}d||(d=new nt);var P=d.get(e);if(P)return P;d.set(e,_),yc(e)?e.forEach(function(M){_.add(qe(M,t,i,M,e,d))}):mc(e)&&e.forEach(function(M,K){_.set(K,qe(M,t,i,K,e,d))});var D=E?b?Vs:Ys:b?Oe:_e,G=T?s:D(e);return We(G||e,function(M,K){G&&(K=M,M=e[K]),rr(_,K,qe(M,t,i,K,e,d))}),_}function md(e){var t=_e(e);return function(i){return ru(i,e,t)}}function ru(e,t,i){var a=i.length;if(e==null)return!a;for(e=ne(e);a--;){var l=i[a],d=t[l],_=e[l];if(_===s&&!(l in e)||!d(_))return!1}return!0}function iu(e,t,i){if(typeof e!="function")throw new He(u);return lr(function(){e.apply(s,i)},t)}function ir(e,t,i,a){var l=-1,d=Hr,_=!0,w=e.length,b=[],E=t.length;if(!w)return b;i&&(t=ae(t,Pe(i))),a?(d=_s,_=!1):t.length>=r&&(d=Xn,_=!1,t=new Kt(t));e:for(;++l<w;){var T=e[l],R=i==null?T:i(T);if(T=a||T!==0?T:0,_&&R===R){for(var L=E;L--;)if(t[L]===R)continue e;b.push(T)}else d(t,R,a)||b.push(T)}return b}var Dt=Lu(ut),su=Lu(ks,!0);function wd(e,t){var i=!0;return Dt(e,function(a,l,d){return i=!!t(a,l,d),i}),i}function ai(e,t,i){for(var a=-1,l=e.length;++a<l;){var d=e[a],_=t(d);if(_!=null&&(w===s?_===_&&!Ue(_):i(_,w)))var w=_,b=d}return b}function yd(e,t,i,a){var l=e.length;for(i=W(i),i<0&&(i=-i>l?0:l+i),a=a===s||a>l?l:W(a),a<0&&(a+=l),a=i>a?0:xc(a);i<a;)e[i++]=t;return e}function ou(e,t){var i=[];return Dt(e,function(a,l,d){t(a,l,d)&&i.push(a)}),i}function me(e,t,i,a,l){var d=-1,_=e.length;for(i||(i=up),l||(l=[]);++d<_;){var w=e[d];t>0&&i(w)?t>1?me(w,t-1,i,a,l):kt(l,w):a||(l[l.length]=w)}return l}var Ls=ku(),au=ku(!0);function ut(e,t){return e&&Ls(e,t,_e)}function ks(e,t){return e&&au(e,t,_e)}function ui(e,t){return Lt(t,function(i){return At(e[i])})}function Yt(e,t){t=Nt(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[lt(t[i++])];return i&&i==a?e:s}function uu(e,t,i){var a=t(e);return B(e)?a:kt(a,i(e))}function xe(e){return e==null?e===s?Jl:zl:qt&&qt in ne(e)?np(e):gp(e)}function Ps(e,t){return e>t}function bd(e,t){return e!=null&&te.call(e,t)}function xd(e,t){return e!=null&&t in ne(e)}function Sd(e,t,i){return e>=ye(t,i)&&e<pe(t,i)}function $s(e,t,i){for(var a=i?_s:Hr,l=e[0].length,d=e.length,_=d,w=x(d),b=1/0,E=[];_--;){var T=e[_];_&&t&&(T=ae(T,Pe(t))),b=ye(T.length,b),w[_]=!i&&(t||l>=120&&T.length>=120)?new Kt(_&&T):s}T=e[0];var R=-1,L=w[0];e:for(;++R<l&&E.length<b;){var P=T[R],D=t?t(P):P;if(P=i||P!==0?P:0,!(L?Xn(L,D):a(E,D,i))){for(_=d;--_;){var G=w[_];if(!(G?Xn(G,D):a(e[_],D,i)))continue e}L&&L.push(D),E.push(P)}}return E}function Ad(e,t,i,a){return ut(e,function(l,d,_){t(a,i(l),d,_)}),a}function sr(e,t,i){t=Nt(t,e),e=Yu(e,t);var a=e==null?e:e[lt(Ke(t))];return a==null?s:ke(a,e,i)}function cu(e){return ce(e)&&xe(e)==fn}function Ed(e){return ce(e)&&xe(e)==Vn}function Td(e){return ce(e)&&xe(e)==qn}function or(e,t,i,a,l){return e===t?!0:e==null||t==null||!ce(e)&&!ce(t)?e!==e&&t!==t:Rd(e,t,i,a,or,l)}function Rd(e,t,i,a,l,d){var _=B(e),w=B(t),b=_?Dr:be(e),E=w?Dr:be(t);b=b==fn?vt:b,E=E==fn?vt:E;var T=b==vt,R=E==vt,L=b==E;if(L&&jt(e)){if(!jt(t))return!1;_=!0,T=!1}if(L&&!T)return d||(d=new nt),_||En(e)?Wu(e,t,i,a,l,d):ep(e,t,b,i,a,l,d);if(!(i&O)){var P=T&&te.call(e,"__wrapped__"),D=R&&te.call(t,"__wrapped__");if(P||D){var G=P?e.value():e,M=D?t.value():t;return d||(d=new nt),l(G,M,i,a,d)}}return L?(d||(d=new nt),tp(e,t,i,a,l,d)):!1}function Od(e){return ce(e)&&be(e)==Qe}function Us(e,t,i,a){var l=i.length,d=l,_=!a;if(e==null)return!d;for(e=ne(e);l--;){var w=i[l];if(_&&w[2]?w[1]!==e[w[0]]:!(w[0]in e))return!1}for(;++l<d;){w=i[l];var b=w[0],E=e[b],T=w[1];if(_&&w[2]){if(E===s&&!(b in e))return!1}else{var R=new nt;if(a)var L=a(E,T,b,e,t,R);if(!(L===s?or(T,E,O|I,a,R):L))return!1}}return!0}function lu(e){if(!ue(e)||lp(e))return!1;var t=At(e)?Of:vh;return t.test(Xt(e))}function Id(e){return ce(e)&&xe(e)==Kn}function Cd(e){return ce(e)&&be(e)==et}function Ld(e){return ce(e)&&Ei(e.length)&&!!oe[xe(e)]}function hu(e){return typeof e=="function"?e:e==null?Ie:typeof e=="object"?B(e)?pu(e[0],e[1]):du(e):Pc(e)}function Ds(e){if(!cr(e))return $f(e);var t=[];for(var i in ne(e))te.call(e,i)&&i!="constructor"&&t.push(i);return t}function kd(e){if(!ue(e))return pp(e);var t=cr(e),i=[];for(var a in e)a=="constructor"&&(t||!te.call(e,a))||i.push(a);return i}function Ms(e,t){return e<t}function fu(e,t){var i=-1,a=Re(e)?x(e.length):[];return Dt(e,function(l,d,_){a[++i]=t(l,d,_)}),a}function du(e){var t=Zs(e);return t.length==1&&t[0][2]?Ku(t[0][0],t[0][1]):function(i){return i===e||Us(i,e,t)}}function pu(e,t){return eo(e)&&zu(t)?Ku(lt(e),t):function(i){var a=lo(i,e);return a===s&&a===t?ho(i,e):or(t,a,O|I)}}function ci(e,t,i,a,l){e!==t&&Ls(t,function(d,_){if(l||(l=new nt),ue(d))Pd(e,t,_,i,ci,a,l);else{var w=a?a(no(e,_),d,_+"",e,t,l):s;w===s&&(w=d),Is(e,_,w)}},Oe)}function Pd(e,t,i,a,l,d,_){var w=no(e,i),b=no(t,i),E=_.get(b);if(E){Is(e,i,E);return}var T=d?d(w,b,i+"",e,t,_):s,R=T===s;if(R){var L=B(b),P=!L&&jt(b),D=!L&&!P&&En(b);T=b,L||P||D?B(w)?T=w:he(w)?T=Te(w):P?(R=!1,T=Tu(b,!0)):D?(R=!1,T=Ru(b,!0)):T=[]:hr(b)||Zt(b)?(T=w,Zt(w)?T=Sc(w):(!ue(w)||At(w))&&(T=qu(b))):R=!1}R&&(_.set(b,T),l(T,b,a,d,_),_.delete(b)),Is(e,i,T)}function gu(e,t){var i=e.length;if(i)return t+=t<0?i:0,St(t,i)?e[t]:s}function _u(e,t,i){t.length?t=ae(t,function(d){return B(d)?function(_){return Yt(_,d.length===1?d[0]:d)}:d}):t=[Ie];var a=-1;t=ae(t,Pe(U()));var l=fu(e,function(d,_,w){var b=ae(t,function(E){return E(d)});return{criteria:b,index:++a,value:d}});return of(l,function(d,_){return zd(d,_,i)})}function $d(e,t){return vu(e,t,function(i,a){return ho(e,a)})}function vu(e,t,i){for(var a=-1,l=t.length,d={};++a<l;){var _=t[a],w=Yt(e,_);i(w,_)&&ar(d,Nt(_,e),w)}return d}function Ud(e){return function(t){return Yt(t,e)}}function Ns(e,t,i,a){var l=a?sf:gn,d=-1,_=t.length,w=e;for(e===t&&(t=Te(t)),i&&(w=ae(e,Pe(i)));++d<_;)for(var b=0,E=t[d],T=i?i(E):E;(b=l(w,T,b,a))>-1;)w!==e&&Qr.call(w,b,1),Qr.call(e,b,1);return e}function mu(e,t){for(var i=e?t.length:0,a=i-1;i--;){var l=t[i];if(i==a||l!==d){var d=l;St(l)?Qr.call(e,l,1):Ws(e,l)}}return e}function Fs(e,t){return e+ni(Za()*(t-e+1))}function Dd(e,t,i,a){for(var l=-1,d=pe(ti((t-e)/(i||1)),0),_=x(d);d--;)_[a?d:++l]=e,e+=i;return _}function js(e,t){var i="";if(!e||t<1||t>Ze)return i;do t%2&&(i+=e),t=ni(t/2),t&&(e+=e);while(t);return i}function q(e,t){return ro(Ju(e,t,Ie),e+"")}function Md(e){return tu(Tn(e))}function Nd(e,t){var i=Tn(e);return wi(i,Jt(t,0,i.length))}function ar(e,t,i,a){if(!ue(e))return e;t=Nt(t,e);for(var l=-1,d=t.length,_=d-1,w=e;w!=null&&++l<d;){var b=lt(t[l]),E=i;if(b==="__proto__"||b==="constructor"||b==="prototype")return e;if(l!=_){var T=w[b];E=a?a(T,b,w):s,E===s&&(E=ue(T)?T:St(t[l+1])?[]:{})}rr(w,b,E),w=w[b]}return e}var wu=ri?function(e,t){return ri.set(e,t),e}:Ie,Fd=ei?function(e,t){return ei(e,"toString",{configurable:!0,enumerable:!1,value:po(t),writable:!0})}:Ie;function jd(e){return wi(Tn(e))}function ze(e,t,i){var a=-1,l=e.length;t<0&&(t=-t>l?0:l+t),i=i>l?l:i,i<0&&(i+=l),l=t>i?0:i-t>>>0,t>>>=0;for(var d=x(l);++a<l;)d[a]=e[a+t];return d}function Bd(e,t){var i;return Dt(e,function(a,l,d){return i=t(a,l,d),!i}),!!i}function li(e,t,i){var a=0,l=e==null?a:e.length;if(typeof t=="number"&&t===t&&l<=Wl){for(;a<l;){var d=a+l>>>1,_=e[d];_!==null&&!Ue(_)&&(i?_<=t:_<t)?a=d+1:l=d}return l}return Bs(e,t,Ie,i)}function Bs(e,t,i,a){var l=0,d=e==null?0:e.length;if(d===0)return 0;t=i(t);for(var _=t!==t,w=t===null,b=Ue(t),E=t===s;l<d;){var T=ni((l+d)/2),R=i(e[T]),L=R!==s,P=R===null,D=R===R,G=Ue(R);if(_)var M=a||D;else E?M=D&&(a||L):w?M=D&&L&&(a||!P):b?M=D&&L&&!P&&(a||!G):P||G?M=!1:M=a?R<=t:R<t;M?l=T+1:d=T}return ye(d,Bl)}function yu(e,t){for(var i=-1,a=e.length,l=0,d=[];++i<a;){var _=e[i],w=t?t(_):_;if(!i||!rt(w,b)){var b=w;d[l++]=_===0?0:_}}return d}function bu(e){return typeof e=="number"?e:Ue(e)?Ur:+e}function $e(e){if(typeof e=="string")return e;if(B(e))return ae(e,$e)+"";if(Ue(e))return Qa?Qa.call(e):"";var t=e+"";return t=="0"&&1/e==-je?"-0":t}function Mt(e,t,i){var a=-1,l=Hr,d=e.length,_=!0,w=[],b=w;if(i)_=!1,l=_s;else if(d>=r){var E=t?null:Zd(e);if(E)return qr(E);_=!1,l=Xn,b=new Kt}else b=t?[]:w;e:for(;++a<d;){var T=e[a],R=t?t(T):T;if(T=i||T!==0?T:0,_&&R===R){for(var L=b.length;L--;)if(b[L]===R)continue e;t&&b.push(R),w.push(T)}else l(b,R,i)||(b!==w&&b.push(R),w.push(T))}return w}function Ws(e,t){return t=Nt(t,e),e=Yu(e,t),e==null||delete e[lt(Ke(t))]}function xu(e,t,i,a){return ar(e,t,i(Yt(e,t)),a)}function hi(e,t,i,a){for(var l=e.length,d=a?l:-1;(a?d--:++d<l)&&t(e[d],d,e););return i?ze(e,a?0:d,a?d+1:l):ze(e,a?d+1:0,a?l:d)}function Su(e,t){var i=e;return i instanceof Y&&(i=i.value()),vs(t,function(a,l){return l.func.apply(l.thisArg,kt([a],l.args))},i)}function Hs(e,t,i){var a=e.length;if(a<2)return a?Mt(e[0]):[];for(var l=-1,d=x(a);++l<a;)for(var _=e[l],w=-1;++w<a;)w!=l&&(d[l]=ir(d[l]||_,e[w],t,i));return Mt(me(d,1),t,i)}function Au(e,t,i){for(var a=-1,l=e.length,d=t.length,_={};++a<l;){var w=a<d?t[a]:s;i(_,e[a],w)}return _}function Gs(e){return he(e)?e:[]}function qs(e){return typeof e=="function"?e:Ie}function Nt(e,t){return B(e)?e:eo(e,t)?[e]:Qu(ee(e))}var Wd=q;function Ft(e,t,i){var a=e.length;return i=i===s?a:i,!t&&i>=a?e:ze(e,t,i)}var Eu=If||function(e){return ge.clearTimeout(e)};function Tu(e,t){if(t)return e.slice();var i=e.length,a=Ka?Ka(i):new e.constructor(i);return e.copy(a),a}function zs(e){var t=new e.constructor(e.byteLength);return new Xr(t).set(new Xr(e)),t}function Hd(e,t){var i=t?zs(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Gd(e){var t=new e.constructor(e.source,ca.exec(e));return t.lastIndex=e.lastIndex,t}function qd(e){return nr?ne(nr.call(e)):{}}function Ru(e,t){var i=t?zs(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Ou(e,t){if(e!==t){var i=e!==s,a=e===null,l=e===e,d=Ue(e),_=t!==s,w=t===null,b=t===t,E=Ue(t);if(!w&&!E&&!d&&e>t||d&&_&&b&&!w&&!E||a&&_&&b||!i&&b||!l)return 1;if(!a&&!d&&!E&&e<t||E&&i&&l&&!a&&!d||w&&i&&l||!_&&l||!b)return-1}return 0}function zd(e,t,i){for(var a=-1,l=e.criteria,d=t.criteria,_=l.length,w=i.length;++a<_;){var b=Ou(l[a],d[a]);if(b){if(a>=w)return b;var E=i[a];return b*(E=="desc"?-1:1)}}return e.index-t.index}function Iu(e,t,i,a){for(var l=-1,d=e.length,_=i.length,w=-1,b=t.length,E=pe(d-_,0),T=x(b+E),R=!a;++w<b;)T[w]=t[w];for(;++l<_;)(R||l<d)&&(T[i[l]]=e[l]);for(;E--;)T[w++]=e[l++];return T}function Cu(e,t,i,a){for(var l=-1,d=e.length,_=-1,w=i.length,b=-1,E=t.length,T=pe(d-w,0),R=x(T+E),L=!a;++l<T;)R[l]=e[l];for(var P=l;++b<E;)R[P+b]=t[b];for(;++_<w;)(L||l<d)&&(R[P+i[_]]=e[l++]);return R}function Te(e,t){var i=-1,a=e.length;for(t||(t=x(a));++i<a;)t[i]=e[i];return t}function ct(e,t,i,a){var l=!i;i||(i={});for(var d=-1,_=t.length;++d<_;){var w=t[d],b=a?a(i[w],e[w],w,i,e):s;b===s&&(b=e[w]),l?yt(i,w,b):rr(i,w,b)}return i}function Kd(e,t){return ct(e,Qs(e),t)}function Jd(e,t){return ct(e,Hu(e),t)}function fi(e,t){return function(i,a){var l=B(i)?Zh:_d,d=t?t():{};return l(i,e,U(a,2),d)}}function xn(e){return q(function(t,i){var a=-1,l=i.length,d=l>1?i[l-1]:s,_=l>2?i[2]:s;for(d=e.length>3&&typeof d=="function"?(l--,d):s,_&&Se(i[0],i[1],_)&&(d=l<3?s:d,l=1),t=ne(t);++a<l;){var w=i[a];w&&e(t,w,a,d)}return t})}function Lu(e,t){return function(i,a){if(i==null)return i;if(!Re(i))return e(i,a);for(var l=i.length,d=t?l:-1,_=ne(i);(t?d--:++d<l)&&a(_[d],d,_)!==!1;);return i}}function ku(e){return function(t,i,a){for(var l=-1,d=ne(t),_=a(t),w=_.length;w--;){var b=_[e?w:++l];if(i(d[b],b,d)===!1)break}return t}}function Yd(e,t,i){var a=t&C,l=ur(e);function d(){var _=this&&this!==ge&&this instanceof d?l:e;return _.apply(a?i:this,arguments)}return d}function Pu(e){return function(t){t=ee(t);var i=_n(t)?tt(t):s,a=i?i[0]:t.charAt(0),l=i?Ft(i,1).join(""):t.slice(1);return a[e]()+l}}function Sn(e){return function(t){return vs(Lc(Cc(t).replace(Nh,"")),e,"")}}function ur(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=bn(e.prototype),a=e.apply(i,t);return ue(a)?a:i}}function Vd(e,t,i){var a=ur(e);function l(){for(var d=arguments.length,_=x(d),w=d,b=An(l);w--;)_[w]=arguments[w];var E=d<3&&_[0]!==b&&_[d-1]!==b?[]:Pt(_,b);if(d-=E.length,d<i)return Nu(e,t,di,l.placeholder,s,_,E,s,s,i-d);var T=this&&this!==ge&&this instanceof l?a:e;return ke(T,this,_)}return l}function $u(e){return function(t,i,a){var l=ne(t);if(!Re(t)){var d=U(i,3);t=_e(t),i=function(w){return d(l[w],w,l)}}var _=e(t,i,a);return _>-1?l[d?t[_]:_]:s}}function Uu(e){return xt(function(t){var i=t.length,a=i,l=Ge.prototype.thru;for(e&&t.reverse();a--;){var d=t[a];if(typeof d!="function")throw new He(u);if(l&&!_&&vi(d)=="wrapper")var _=new Ge([],!0)}for(a=_?a:i;++a<i;){d=t[a];var w=vi(d),b=w=="wrapper"?Xs(d):s;b&&to(b[0])&&b[1]==(le|H|Z|Ee)&&!b[4].length&&b[9]==1?_=_[vi(b[0])].apply(_,b[3]):_=d.length==1&&to(d)?_[w]():_.thru(d)}return function(){var E=arguments,T=E[0];if(_&&E.length==1&&B(T))return _.plant(T).value();for(var R=0,L=i?t[R].apply(this,E):T;++R<i;)L=t[R].call(this,L);return L}})}function di(e,t,i,a,l,d,_,w,b,E){var T=t&le,R=t&C,L=t&$,P=t&(H|re),D=t&we,G=L?s:ur(e);function M(){for(var K=arguments.length,V=x(K),De=K;De--;)V[De]=arguments[De];if(P)var Ae=An(M),Me=uf(V,Ae);if(a&&(V=Iu(V,a,l,P)),d&&(V=Cu(V,d,_,P)),K-=Me,P&&K<E){var fe=Pt(V,Ae);return Nu(e,t,di,M.placeholder,i,V,fe,w,b,E-K)}var it=R?i:this,Tt=L?it[e]:e;return K=V.length,w?V=_p(V,w):D&&K>1&&V.reverse(),T&&b<K&&(V.length=b),this&&this!==ge&&this instanceof M&&(Tt=G||ur(Tt)),Tt.apply(it,V)}return M}function Du(e,t){return function(i,a){return Ad(i,e,t(a),{})}}function pi(e,t){return function(i,a){var l;if(i===s&&a===s)return t;if(i!==s&&(l=i),a!==s){if(l===s)return a;typeof i=="string"||typeof a=="string"?(i=$e(i),a=$e(a)):(i=bu(i),a=bu(a)),l=e(i,a)}return l}}function Ks(e){return xt(function(t){return t=ae(t,Pe(U())),q(function(i){var a=this;return e(t,function(l){return ke(l,a,i)})})})}function gi(e,t){t=t===s?" ":$e(t);var i=t.length;if(i<2)return i?js(t,e):t;var a=js(t,ti(e/vn(t)));return _n(t)?Ft(tt(a),0,e).join(""):a.slice(0,e)}function Xd(e,t,i,a){var l=t&C,d=ur(e);function _(){for(var w=-1,b=arguments.length,E=-1,T=a.length,R=x(T+b),L=this&&this!==ge&&this instanceof _?d:e;++E<T;)R[E]=a[E];for(;b--;)R[E++]=arguments[++w];return ke(L,l?i:this,R)}return _}function Mu(e){return function(t,i,a){return a&&typeof a!="number"&&Se(t,i,a)&&(i=a=s),t=Et(t),i===s?(i=t,t=0):i=Et(i),a=a===s?t<i?1:-1:Et(a),Dd(t,i,a,e)}}function _i(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=Je(t),i=Je(i)),e(t,i)}}function Nu(e,t,i,a,l,d,_,w,b,E){var T=t&H,R=T?_:s,L=T?s:_,P=T?d:s,D=T?s:d;t|=T?Z:X,t&=~(T?X:Z),t&F||(t&=~(C|$));var G=[e,t,l,P,R,D,L,w,b,E],M=i.apply(s,G);return to(e)&&Vu(M,G),M.placeholder=a,Xu(M,e,t)}function Js(e){var t=de[e];return function(i,a){if(i=Je(i),a=a==null?0:ye(W(a),292),a&&Xa(i)){var l=(ee(i)+"e").split("e"),d=t(l[0]+"e"+(+l[1]+a));return l=(ee(d)+"e").split("e"),+(l[0]+"e"+(+l[1]-a))}return t(i)}}var Zd=wn&&1/qr(new wn([,-0]))[1]==je?function(e){return new wn(e)}:vo;function Fu(e){return function(t){var i=be(t);return i==Qe?As(t):i==et?gf(t):af(t,e(t))}}function bt(e,t,i,a,l,d,_,w){var b=t&$;if(!b&&typeof e!="function")throw new He(u);var E=a?a.length:0;if(E||(t&=~(Z|X),a=l=s),_=_===s?_:pe(W(_),0),w=w===s?w:W(w),E-=l?l.length:0,t&X){var T=a,R=l;a=l=s}var L=b?s:Xs(e),P=[e,t,i,a,l,T,R,d,_,w];if(L&&dp(P,L),e=P[0],t=P[1],i=P[2],a=P[3],l=P[4],w=P[9]=P[9]===s?b?0:e.length:pe(P[9]-E,0),!w&&t&(H|re)&&(t&=~(H|re)),!t||t==C)var D=Yd(e,t,i);else t==H||t==re?D=Vd(e,t,w):(t==Z||t==(C|Z))&&!l.length?D=Xd(e,t,i,a):D=di.apply(s,P);var G=L?wu:Vu;return Xu(G(D,P),e,t)}function ju(e,t,i,a){return e===s||rt(e,mn[i])&&!te.call(a,i)?t:e}function Bu(e,t,i,a,l,d){return ue(e)&&ue(t)&&(d.set(t,e),ci(e,t,s,Bu,d),d.delete(t)),e}function Qd(e){return hr(e)?s:e}function Wu(e,t,i,a,l,d){var _=i&O,w=e.length,b=t.length;if(w!=b&&!(_&&b>w))return!1;var E=d.get(e),T=d.get(t);if(E&&T)return E==t&&T==e;var R=-1,L=!0,P=i&I?new Kt:s;for(d.set(e,t),d.set(t,e);++R<w;){var D=e[R],G=t[R];if(a)var M=_?a(G,D,R,t,e,d):a(D,G,R,e,t,d);if(M!==s){if(M)continue;L=!1;break}if(P){if(!ms(t,function(K,V){if(!Xn(P,V)&&(D===K||l(D,K,i,a,d)))return P.push(V)})){L=!1;break}}else if(!(D===G||l(D,G,i,a,d))){L=!1;break}}return d.delete(e),d.delete(t),L}function ep(e,t,i,a,l,d,_){switch(i){case dn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Vn:return!(e.byteLength!=t.byteLength||!d(new Xr(e),new Xr(t)));case Gn:case qn:case zn:return rt(+e,+t);case Mr:return e.name==t.name&&e.message==t.message;case Kn:case Jn:return e==t+"";case Qe:var w=As;case et:var b=a&O;if(w||(w=qr),e.size!=t.size&&!b)return!1;var E=_.get(e);if(E)return E==t;a|=I,_.set(e,t);var T=Wu(w(e),w(t),a,l,d,_);return _.delete(e),T;case Fr:if(nr)return nr.call(e)==nr.call(t)}return!1}function tp(e,t,i,a,l,d){var _=i&O,w=Ys(e),b=w.length,E=Ys(t),T=E.length;if(b!=T&&!_)return!1;for(var R=b;R--;){var L=w[R];if(!(_?L in t:te.call(t,L)))return!1}var P=d.get(e),D=d.get(t);if(P&&D)return P==t&&D==e;var G=!0;d.set(e,t),d.set(t,e);for(var M=_;++R<b;){L=w[R];var K=e[L],V=t[L];if(a)var De=_?a(V,K,L,t,e,d):a(K,V,L,e,t,d);if(!(De===s?K===V||l(K,V,i,a,d):De)){G=!1;break}M||(M=L=="constructor")}if(G&&!M){var Ae=e.constructor,Me=t.constructor;Ae!=Me&&"constructor"in e&&"constructor"in t&&!(typeof Ae=="function"&&Ae instanceof Ae&&typeof Me=="function"&&Me instanceof Me)&&(G=!1)}return d.delete(e),d.delete(t),G}function xt(e){return ro(Ju(e,s,rc),e+"")}function Ys(e){return uu(e,_e,Qs)}function Vs(e){return uu(e,Oe,Hu)}var Xs=ri?function(e){return ri.get(e)}:vo;function vi(e){for(var t=e.name+"",i=yn[t],a=te.call(yn,t)?i.length:0;a--;){var l=i[a],d=l.func;if(d==null||d==e)return l.name}return t}function An(e){var t=te.call(f,"placeholder")?f:e;return t.placeholder}function U(){var e=f.iteratee||go;return e=e===go?hu:e,arguments.length?e(arguments[0],arguments[1]):e}function mi(e,t){var i=e.__data__;return cp(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Zs(e){for(var t=_e(e),i=t.length;i--;){var a=t[i],l=e[a];t[i]=[a,l,zu(l)]}return t}function Vt(e,t){var i=ff(e,t);return lu(i)?i:s}function np(e){var t=te.call(e,qt),i=e[qt];try{e[qt]=s;var a=!0}catch{}var l=Yr.call(e);return a&&(t?e[qt]=i:delete e[qt]),l}var Qs=Ts?function(e){return e==null?[]:(e=ne(e),Lt(Ts(e),function(t){return Ya.call(e,t)}))}:mo,Hu=Ts?function(e){for(var t=[];e;)kt(t,Qs(e)),e=Zr(e);return t}:mo,be=xe;(Rs&&be(new Rs(new ArrayBuffer(1)))!=dn||Qn&&be(new Qn)!=Qe||Os&&be(Os.resolve())!=sa||wn&&be(new wn)!=et||er&&be(new er)!=Yn)&&(be=function(e){var t=xe(e),i=t==vt?e.constructor:s,a=i?Xt(i):"";if(a)switch(a){case Nf:return dn;case Ff:return Qe;case jf:return sa;case Bf:return et;case Wf:return Yn}return t});function rp(e,t,i){for(var a=-1,l=i.length;++a<l;){var d=i[a],_=d.size;switch(d.type){case"drop":e+=_;break;case"dropRight":t-=_;break;case"take":t=ye(t,e+_);break;case"takeRight":e=pe(e,t-_);break}}return{start:e,end:t}}function ip(e){var t=e.match(ch);return t?t[1].split(lh):[]}function Gu(e,t,i){t=Nt(t,e);for(var a=-1,l=t.length,d=!1;++a<l;){var _=lt(t[a]);if(!(d=e!=null&&i(e,_)))break;e=e[_]}return d||++a!=l?d:(l=e==null?0:e.length,!!l&&Ei(l)&&St(_,l)&&(B(e)||Zt(e)))}function sp(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&te.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function qu(e){return typeof e.constructor=="function"&&!cr(e)?bn(Zr(e)):{}}function op(e,t,i){var a=e.constructor;switch(t){case Vn:return zs(e);case Gn:case qn:return new a(+e);case dn:return Hd(e,i);case Zi:case Qi:case es:case ts:case ns:case rs:case is:case ss:case os:return Ru(e,i);case Qe:return new a;case zn:case Jn:return new a(e);case Kn:return Gd(e);case et:return new a;case Fr:return qd(e)}}function ap(e,t){var i=t.length;if(!i)return e;var a=i-1;return t[a]=(i>1?"& ":"")+t[a],t=t.join(i>2?", ":" "),e.replace(uh,`{
/* [wrapped with `+t+`] */
`)}function up(e){return B(e)||Zt(e)||!!(Va&&e&&e[Va])}function St(e,t){var i=typeof e;return t=t??Ze,!!t&&(i=="number"||i!="symbol"&&wh.test(e))&&e>-1&&e%1==0&&e<t}function Se(e,t,i){if(!ue(i))return!1;var a=typeof t;return(a=="number"?Re(i)&&St(t,i.length):a=="string"&&t in i)?rt(i[t],e):!1}function eo(e,t){if(B(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Ue(e)?!0:ih.test(e)||!rh.test(e)||t!=null&&e in ne(t)}function cp(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function to(e){var t=vi(e),i=f[t];if(typeof i!="function"||!(t in Y.prototype))return!1;if(e===i)return!0;var a=Xs(i);return!!a&&e===a[0]}function lp(e){return!!za&&za in e}var hp=Kr?At:wo;function cr(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||mn;return e===i}function zu(e){return e===e&&!ue(e)}function Ku(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==s||e in ne(i))}}function fp(e){var t=Si(e,function(a){return i.size===p&&i.clear(),a}),i=t.cache;return t}function dp(e,t){var i=e[1],a=t[1],l=i|a,d=l<(C|$|le),_=a==le&&i==H||a==le&&i==Ee&&e[7].length<=t[8]||a==(le|Ee)&&t[7].length<=t[8]&&i==H;if(!(d||_))return e;a&C&&(e[2]=t[2],l|=i&C?0:F);var w=t[3];if(w){var b=e[3];e[3]=b?Iu(b,w,t[4]):w,e[4]=b?Pt(e[3],g):t[4]}return w=t[5],w&&(b=e[5],e[5]=b?Cu(b,w,t[6]):w,e[6]=b?Pt(e[5],g):t[6]),w=t[7],w&&(e[7]=w),a&le&&(e[8]=e[8]==null?t[8]:ye(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}function pp(e){var t=[];if(e!=null)for(var i in ne(e))t.push(i);return t}function gp(e){return Yr.call(e)}function Ju(e,t,i){return t=pe(t===s?e.length-1:t,0),function(){for(var a=arguments,l=-1,d=pe(a.length-t,0),_=x(d);++l<d;)_[l]=a[t+l];l=-1;for(var w=x(t+1);++l<t;)w[l]=a[l];return w[t]=i(_),ke(e,this,w)}}function Yu(e,t){return t.length<2?e:Yt(e,ze(t,0,-1))}function _p(e,t){for(var i=e.length,a=ye(t.length,i),l=Te(e);a--;){var d=t[a];e[a]=St(d,i)?l[d]:s}return e}function no(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Vu=Zu(wu),lr=Lf||function(e,t){return ge.setTimeout(e,t)},ro=Zu(Fd);function Xu(e,t,i){var a=t+"";return ro(e,ap(a,vp(ip(a),i)))}function Zu(e){var t=0,i=0;return function(){var a=Uf(),l=Hn-(a-i);if(i=a,l>0){if(++t>=$r)return arguments[0]}else t=0;return e.apply(s,arguments)}}function wi(e,t){var i=-1,a=e.length,l=a-1;for(t=t===s?a:t;++i<t;){var d=Fs(i,l),_=e[d];e[d]=e[i],e[i]=_}return e.length=t,e}var Qu=fp(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(sh,function(i,a,l,d){t.push(l?d.replace(dh,"$1"):a||i)}),t});function lt(e){if(typeof e=="string"||Ue(e))return e;var t=e+"";return t=="0"&&1/e==-je?"-0":t}function Xt(e){if(e!=null){try{return Jr.call(e)}catch{}try{return e+""}catch{}}return""}function vp(e,t){return We(Hl,function(i){var a="_."+i[0];t&i[1]&&!Hr(e,a)&&e.push(a)}),e.sort()}function ec(e){if(e instanceof Y)return e.clone();var t=new Ge(e.__wrapped__,e.__chain__);return t.__actions__=Te(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function mp(e,t,i){(i?Se(e,t,i):t===s)?t=1:t=pe(W(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var l=0,d=0,_=x(ti(a/t));l<a;)_[d++]=ze(e,l,l+=t);return _}function wp(e){for(var t=-1,i=e==null?0:e.length,a=0,l=[];++t<i;){var d=e[t];d&&(l[a++]=d)}return l}function yp(){var e=arguments.length;if(!e)return[];for(var t=x(e-1),i=arguments[0],a=e;a--;)t[a-1]=arguments[a];return kt(B(i)?Te(i):[i],me(t,1))}var bp=q(function(e,t){return he(e)?ir(e,me(t,1,he,!0)):[]}),xp=q(function(e,t){var i=Ke(t);return he(i)&&(i=s),he(e)?ir(e,me(t,1,he,!0),U(i,2)):[]}),Sp=q(function(e,t){var i=Ke(t);return he(i)&&(i=s),he(e)?ir(e,me(t,1,he,!0),s,i):[]});function Ap(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:W(t),ze(e,t<0?0:t,a)):[]}function Ep(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:W(t),t=a-t,ze(e,0,t<0?0:t)):[]}function Tp(e,t){return e&&e.length?hi(e,U(t,3),!0,!0):[]}function Rp(e,t){return e&&e.length?hi(e,U(t,3),!0):[]}function Op(e,t,i,a){var l=e==null?0:e.length;return l?(i&&typeof i!="number"&&Se(e,t,i)&&(i=0,a=l),yd(e,t,i,a)):[]}function tc(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var l=i==null?0:W(i);return l<0&&(l=pe(a+l,0)),Gr(e,U(t,3),l)}function nc(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var l=a-1;return i!==s&&(l=W(i),l=i<0?pe(a+l,0):ye(l,a-1)),Gr(e,U(t,3),l,!0)}function rc(e){var t=e==null?0:e.length;return t?me(e,1):[]}function Ip(e){var t=e==null?0:e.length;return t?me(e,je):[]}function Cp(e,t){var i=e==null?0:e.length;return i?(t=t===s?1:W(t),me(e,t)):[]}function Lp(e){for(var t=-1,i=e==null?0:e.length,a={};++t<i;){var l=e[t];a[l[0]]=l[1]}return a}function ic(e){return e&&e.length?e[0]:s}function kp(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var l=i==null?0:W(i);return l<0&&(l=pe(a+l,0)),gn(e,t,l)}function Pp(e){var t=e==null?0:e.length;return t?ze(e,0,-1):[]}var $p=q(function(e){var t=ae(e,Gs);return t.length&&t[0]===e[0]?$s(t):[]}),Up=q(function(e){var t=Ke(e),i=ae(e,Gs);return t===Ke(i)?t=s:i.pop(),i.length&&i[0]===e[0]?$s(i,U(t,2)):[]}),Dp=q(function(e){var t=Ke(e),i=ae(e,Gs);return t=typeof t=="function"?t:s,t&&i.pop(),i.length&&i[0]===e[0]?$s(i,s,t):[]});function Mp(e,t){return e==null?"":Pf.call(e,t)}function Ke(e){var t=e==null?0:e.length;return t?e[t-1]:s}function Np(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var l=a;return i!==s&&(l=W(i),l=l<0?pe(a+l,0):ye(l,a-1)),t===t?vf(e,t,l):Gr(e,Na,l,!0)}function Fp(e,t){return e&&e.length?gu(e,W(t)):s}var jp=q(sc);function sc(e,t){return e&&e.length&&t&&t.length?Ns(e,t):e}function Bp(e,t,i){return e&&e.length&&t&&t.length?Ns(e,t,U(i,2)):e}function Wp(e,t,i){return e&&e.length&&t&&t.length?Ns(e,t,s,i):e}var Hp=xt(function(e,t){var i=e==null?0:e.length,a=Cs(e,t);return mu(e,ae(t,function(l){return St(l,i)?+l:l}).sort(Ou)),a});function Gp(e,t){var i=[];if(!(e&&e.length))return i;var a=-1,l=[],d=e.length;for(t=U(t,3);++a<d;){var _=e[a];t(_,a,e)&&(i.push(_),l.push(a))}return mu(e,l),i}function io(e){return e==null?e:Mf.call(e)}function qp(e,t,i){var a=e==null?0:e.length;return a?(i&&typeof i!="number"&&Se(e,t,i)?(t=0,i=a):(t=t==null?0:W(t),i=i===s?a:W(i)),ze(e,t,i)):[]}function zp(e,t){return li(e,t)}function Kp(e,t,i){return Bs(e,t,U(i,2))}function Jp(e,t){var i=e==null?0:e.length;if(i){var a=li(e,t);if(a<i&&rt(e[a],t))return a}return-1}function Yp(e,t){return li(e,t,!0)}function Vp(e,t,i){return Bs(e,t,U(i,2),!0)}function Xp(e,t){var i=e==null?0:e.length;if(i){var a=li(e,t,!0)-1;if(rt(e[a],t))return a}return-1}function Zp(e){return e&&e.length?yu(e):[]}function Qp(e,t){return e&&e.length?yu(e,U(t,2)):[]}function eg(e){var t=e==null?0:e.length;return t?ze(e,1,t):[]}function tg(e,t,i){return e&&e.length?(t=i||t===s?1:W(t),ze(e,0,t<0?0:t)):[]}function ng(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===s?1:W(t),t=a-t,ze(e,t<0?0:t,a)):[]}function rg(e,t){return e&&e.length?hi(e,U(t,3),!1,!0):[]}function ig(e,t){return e&&e.length?hi(e,U(t,3)):[]}var sg=q(function(e){return Mt(me(e,1,he,!0))}),og=q(function(e){var t=Ke(e);return he(t)&&(t=s),Mt(me(e,1,he,!0),U(t,2))}),ag=q(function(e){var t=Ke(e);return t=typeof t=="function"?t:s,Mt(me(e,1,he,!0),s,t)});function ug(e){return e&&e.length?Mt(e):[]}function cg(e,t){return e&&e.length?Mt(e,U(t,2)):[]}function lg(e,t){return t=typeof t=="function"?t:s,e&&e.length?Mt(e,s,t):[]}function so(e){if(!(e&&e.length))return[];var t=0;return e=Lt(e,function(i){if(he(i))return t=pe(i.length,t),!0}),xs(t,function(i){return ae(e,ws(i))})}function oc(e,t){if(!(e&&e.length))return[];var i=so(e);return t==null?i:ae(i,function(a){return ke(t,s,a)})}var hg=q(function(e,t){return he(e)?ir(e,t):[]}),fg=q(function(e){return Hs(Lt(e,he))}),dg=q(function(e){var t=Ke(e);return he(t)&&(t=s),Hs(Lt(e,he),U(t,2))}),pg=q(function(e){var t=Ke(e);return t=typeof t=="function"?t:s,Hs(Lt(e,he),s,t)}),gg=q(so);function _g(e,t){return Au(e||[],t||[],rr)}function vg(e,t){return Au(e||[],t||[],ar)}var mg=q(function(e){var t=e.length,i=t>1?e[t-1]:s;return i=typeof i=="function"?(e.pop(),i):s,oc(e,i)});function ac(e){var t=f(e);return t.__chain__=!0,t}function wg(e,t){return t(e),e}function yi(e,t){return t(e)}var yg=xt(function(e){var t=e.length,i=t?e[0]:0,a=this.__wrapped__,l=function(d){return Cs(d,e)};return t>1||this.__actions__.length||!(a instanceof Y)||!St(i)?this.thru(l):(a=a.slice(i,+i+(t?1:0)),a.__actions__.push({func:yi,args:[l],thisArg:s}),new Ge(a,this.__chain__).thru(function(d){return t&&!d.length&&d.push(s),d}))});function bg(){return ac(this)}function xg(){return new Ge(this.value(),this.__chain__)}function Sg(){this.__values__===s&&(this.__values__=bc(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function Ag(){return this}function Eg(e){for(var t,i=this;i instanceof si;){var a=ec(i);a.__index__=0,a.__values__=s,t?l.__wrapped__=a:t=a;var l=a;i=i.__wrapped__}return l.__wrapped__=e,t}function Tg(){var e=this.__wrapped__;if(e instanceof Y){var t=e;return this.__actions__.length&&(t=new Y(this)),t=t.reverse(),t.__actions__.push({func:yi,args:[io],thisArg:s}),new Ge(t,this.__chain__)}return this.thru(io)}function Rg(){return Su(this.__wrapped__,this.__actions__)}var Og=fi(function(e,t,i){te.call(e,i)?++e[i]:yt(e,i,1)});function Ig(e,t,i){var a=B(e)?Da:wd;return i&&Se(e,t,i)&&(t=s),a(e,U(t,3))}function Cg(e,t){var i=B(e)?Lt:ou;return i(e,U(t,3))}var Lg=$u(tc),kg=$u(nc);function Pg(e,t){return me(bi(e,t),1)}function $g(e,t){return me(bi(e,t),je)}function Ug(e,t,i){return i=i===s?1:W(i),me(bi(e,t),i)}function uc(e,t){var i=B(e)?We:Dt;return i(e,U(t,3))}function cc(e,t){var i=B(e)?Qh:su;return i(e,U(t,3))}var Dg=fi(function(e,t,i){te.call(e,i)?e[i].push(t):yt(e,i,[t])});function Mg(e,t,i,a){e=Re(e)?e:Tn(e),i=i&&!a?W(i):0;var l=e.length;return i<0&&(i=pe(l+i,0)),Ti(e)?i<=l&&e.indexOf(t,i)>-1:!!l&&gn(e,t,i)>-1}var Ng=q(function(e,t,i){var a=-1,l=typeof t=="function",d=Re(e)?x(e.length):[];return Dt(e,function(_){d[++a]=l?ke(t,_,i):sr(_,t,i)}),d}),Fg=fi(function(e,t,i){yt(e,i,t)});function bi(e,t){var i=B(e)?ae:fu;return i(e,U(t,3))}function jg(e,t,i,a){return e==null?[]:(B(t)||(t=t==null?[]:[t]),i=a?s:i,B(i)||(i=i==null?[]:[i]),_u(e,t,i))}var Bg=fi(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function Wg(e,t,i){var a=B(e)?vs:ja,l=arguments.length<3;return a(e,U(t,4),i,l,Dt)}function Hg(e,t,i){var a=B(e)?ef:ja,l=arguments.length<3;return a(e,U(t,4),i,l,su)}function Gg(e,t){var i=B(e)?Lt:ou;return i(e,Ai(U(t,3)))}function qg(e){var t=B(e)?tu:Md;return t(e)}function zg(e,t,i){(i?Se(e,t,i):t===s)?t=1:t=W(t);var a=B(e)?pd:Nd;return a(e,t)}function Kg(e){var t=B(e)?gd:jd;return t(e)}function Jg(e){if(e==null)return 0;if(Re(e))return Ti(e)?vn(e):e.length;var t=be(e);return t==Qe||t==et?e.size:Ds(e).length}function Yg(e,t,i){var a=B(e)?ms:Bd;return i&&Se(e,t,i)&&(t=s),a(e,U(t,3))}var Vg=q(function(e,t){if(e==null)return[];var i=t.length;return i>1&&Se(e,t[0],t[1])?t=[]:i>2&&Se(t[0],t[1],t[2])&&(t=[t[0]]),_u(e,me(t,1),[])}),xi=Cf||function(){return ge.Date.now()};function Xg(e,t){if(typeof t!="function")throw new He(u);return e=W(e),function(){if(--e<1)return t.apply(this,arguments)}}function lc(e,t,i){return t=i?s:t,t=e&&t==null?e.length:t,bt(e,le,s,s,s,s,t)}function hc(e,t){var i;if(typeof t!="function")throw new He(u);return e=W(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=s),i}}var oo=q(function(e,t,i){var a=C;if(i.length){var l=Pt(i,An(oo));a|=Z}return bt(e,a,t,i,l)}),fc=q(function(e,t,i){var a=C|$;if(i.length){var l=Pt(i,An(fc));a|=Z}return bt(t,a,e,i,l)});function dc(e,t,i){t=i?s:t;var a=bt(e,H,s,s,s,s,s,t);return a.placeholder=dc.placeholder,a}function pc(e,t,i){t=i?s:t;var a=bt(e,re,s,s,s,s,s,t);return a.placeholder=pc.placeholder,a}function gc(e,t,i){var a,l,d,_,w,b,E=0,T=!1,R=!1,L=!0;if(typeof e!="function")throw new He(u);t=Je(t)||0,ue(i)&&(T=!!i.leading,R="maxWait"in i,d=R?pe(Je(i.maxWait)||0,t):d,L="trailing"in i?!!i.trailing:L);function P(fe){var it=a,Tt=l;return a=l=s,E=fe,_=e.apply(Tt,it),_}function D(fe){return E=fe,w=lr(K,t),T?P(fe):_}function G(fe){var it=fe-b,Tt=fe-E,$c=t-it;return R?ye($c,d-Tt):$c}function M(fe){var it=fe-b,Tt=fe-E;return b===s||it>=t||it<0||R&&Tt>=d}function K(){var fe=xi();if(M(fe))return V(fe);w=lr(K,G(fe))}function V(fe){return w=s,L&&a?P(fe):(a=l=s,_)}function De(){w!==s&&Eu(w),E=0,a=b=l=w=s}function Ae(){return w===s?_:V(xi())}function Me(){var fe=xi(),it=M(fe);if(a=arguments,l=this,b=fe,it){if(w===s)return D(b);if(R)return Eu(w),w=lr(K,t),P(b)}return w===s&&(w=lr(K,t)),_}return Me.cancel=De,Me.flush=Ae,Me}var Zg=q(function(e,t){return iu(e,1,t)}),Qg=q(function(e,t,i){return iu(e,Je(t)||0,i)});function e_(e){return bt(e,we)}function Si(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new He(u);var i=function(){var a=arguments,l=t?t.apply(this,a):a[0],d=i.cache;if(d.has(l))return d.get(l);var _=e.apply(this,a);return i.cache=d.set(l,_)||d,_};return i.cache=new(Si.Cache||wt),i}Si.Cache=wt;function Ai(e){if(typeof e!="function")throw new He(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function t_(e){return hc(2,e)}var n_=Wd(function(e,t){t=t.length==1&&B(t[0])?ae(t[0],Pe(U())):ae(me(t,1),Pe(U()));var i=t.length;return q(function(a){for(var l=-1,d=ye(a.length,i);++l<d;)a[l]=t[l].call(this,a[l]);return ke(e,this,a)})}),ao=q(function(e,t){var i=Pt(t,An(ao));return bt(e,Z,s,t,i)}),_c=q(function(e,t){var i=Pt(t,An(_c));return bt(e,X,s,t,i)}),r_=xt(function(e,t){return bt(e,Ee,s,s,s,t)});function i_(e,t){if(typeof e!="function")throw new He(u);return t=t===s?t:W(t),q(e,t)}function s_(e,t){if(typeof e!="function")throw new He(u);return t=t==null?0:pe(W(t),0),q(function(i){var a=i[t],l=Ft(i,0,t);return a&&kt(l,a),ke(e,this,l)})}function o_(e,t,i){var a=!0,l=!0;if(typeof e!="function")throw new He(u);return ue(i)&&(a="leading"in i?!!i.leading:a,l="trailing"in i?!!i.trailing:l),gc(e,t,{leading:a,maxWait:t,trailing:l})}function a_(e){return lc(e,1)}function u_(e,t){return ao(qs(t),e)}function c_(){if(!arguments.length)return[];var e=arguments[0];return B(e)?e:[e]}function l_(e){return qe(e,S)}function h_(e,t){return t=typeof t=="function"?t:s,qe(e,S,t)}function f_(e){return qe(e,v|S)}function d_(e,t){return t=typeof t=="function"?t:s,qe(e,v|S,t)}function p_(e,t){return t==null||ru(e,t,_e(t))}function rt(e,t){return e===t||e!==e&&t!==t}var g_=_i(Ps),__=_i(function(e,t){return e>=t}),Zt=cu(function(){return arguments}())?cu:function(e){return ce(e)&&te.call(e,"callee")&&!Ya.call(e,"callee")},B=x.isArray,v_=Ca?Pe(Ca):Ed;function Re(e){return e!=null&&Ei(e.length)&&!At(e)}function he(e){return ce(e)&&Re(e)}function m_(e){return e===!0||e===!1||ce(e)&&xe(e)==Gn}var jt=kf||wo,w_=La?Pe(La):Td;function y_(e){return ce(e)&&e.nodeType===1&&!hr(e)}function b_(e){if(e==null)return!0;if(Re(e)&&(B(e)||typeof e=="string"||typeof e.splice=="function"||jt(e)||En(e)||Zt(e)))return!e.length;var t=be(e);if(t==Qe||t==et)return!e.size;if(cr(e))return!Ds(e).length;for(var i in e)if(te.call(e,i))return!1;return!0}function x_(e,t){return or(e,t)}function S_(e,t,i){i=typeof i=="function"?i:s;var a=i?i(e,t):s;return a===s?or(e,t,s,i):!!a}function uo(e){if(!ce(e))return!1;var t=xe(e);return t==Mr||t==ql||typeof e.message=="string"&&typeof e.name=="string"&&!hr(e)}function A_(e){return typeof e=="number"&&Xa(e)}function At(e){if(!ue(e))return!1;var t=xe(e);return t==Nr||t==ia||t==Gl||t==Kl}function vc(e){return typeof e=="number"&&e==W(e)}function Ei(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ze}function ue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ce(e){return e!=null&&typeof e=="object"}var mc=ka?Pe(ka):Od;function E_(e,t){return e===t||Us(e,t,Zs(t))}function T_(e,t,i){return i=typeof i=="function"?i:s,Us(e,t,Zs(t),i)}function R_(e){return wc(e)&&e!=+e}function O_(e){if(hp(e))throw new j(o);return lu(e)}function I_(e){return e===null}function C_(e){return e==null}function wc(e){return typeof e=="number"||ce(e)&&xe(e)==zn}function hr(e){if(!ce(e)||xe(e)!=vt)return!1;var t=Zr(e);if(t===null)return!0;var i=te.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&Jr.call(i)==Tf}var co=Pa?Pe(Pa):Id;function L_(e){return vc(e)&&e>=-Ze&&e<=Ze}var yc=$a?Pe($a):Cd;function Ti(e){return typeof e=="string"||!B(e)&&ce(e)&&xe(e)==Jn}function Ue(e){return typeof e=="symbol"||ce(e)&&xe(e)==Fr}var En=Ua?Pe(Ua):Ld;function k_(e){return e===s}function P_(e){return ce(e)&&be(e)==Yn}function $_(e){return ce(e)&&xe(e)==Yl}var U_=_i(Ms),D_=_i(function(e,t){return e<=t});function bc(e){if(!e)return[];if(Re(e))return Ti(e)?tt(e):Te(e);if(Zn&&e[Zn])return pf(e[Zn]());var t=be(e),i=t==Qe?As:t==et?qr:Tn;return i(e)}function Et(e){if(!e)return e===0?e:0;if(e=Je(e),e===je||e===-je){var t=e<0?-1:1;return t*jl}return e===e?e:0}function W(e){var t=Et(e),i=t%1;return t===t?i?t-i:t:0}function xc(e){return e?Jt(W(e),0,at):0}function Je(e){if(typeof e=="number")return e;if(Ue(e))return Ur;if(ue(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ue(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ba(e);var i=_h.test(e);return i||mh.test(e)?Vh(e.slice(2),i?2:8):gh.test(e)?Ur:+e}function Sc(e){return ct(e,Oe(e))}function M_(e){return e?Jt(W(e),-Ze,Ze):e===0?e:0}function ee(e){return e==null?"":$e(e)}var N_=xn(function(e,t){if(cr(t)||Re(t)){ct(t,_e(t),e);return}for(var i in t)te.call(t,i)&&rr(e,i,t[i])}),Ac=xn(function(e,t){ct(t,Oe(t),e)}),Ri=xn(function(e,t,i,a){ct(t,Oe(t),e,a)}),F_=xn(function(e,t,i,a){ct(t,_e(t),e,a)}),j_=xt(Cs);function B_(e,t){var i=bn(e);return t==null?i:nu(i,t)}var W_=q(function(e,t){e=ne(e);var i=-1,a=t.length,l=a>2?t[2]:s;for(l&&Se(t[0],t[1],l)&&(a=1);++i<a;)for(var d=t[i],_=Oe(d),w=-1,b=_.length;++w<b;){var E=_[w],T=e[E];(T===s||rt(T,mn[E])&&!te.call(e,E))&&(e[E]=d[E])}return e}),H_=q(function(e){return e.push(s,Bu),ke(Ec,s,e)});function G_(e,t){return Ma(e,U(t,3),ut)}function q_(e,t){return Ma(e,U(t,3),ks)}function z_(e,t){return e==null?e:Ls(e,U(t,3),Oe)}function K_(e,t){return e==null?e:au(e,U(t,3),Oe)}function J_(e,t){return e&&ut(e,U(t,3))}function Y_(e,t){return e&&ks(e,U(t,3))}function V_(e){return e==null?[]:ui(e,_e(e))}function X_(e){return e==null?[]:ui(e,Oe(e))}function lo(e,t,i){var a=e==null?s:Yt(e,t);return a===s?i:a}function Z_(e,t){return e!=null&&Gu(e,t,bd)}function ho(e,t){return e!=null&&Gu(e,t,xd)}var Q_=Du(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Yr.call(t)),e[t]=i},po(Ie)),ev=Du(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Yr.call(t)),te.call(e,t)?e[t].push(i):e[t]=[i]},U),tv=q(sr);function _e(e){return Re(e)?eu(e):Ds(e)}function Oe(e){return Re(e)?eu(e,!0):kd(e)}function nv(e,t){var i={};return t=U(t,3),ut(e,function(a,l,d){yt(i,t(a,l,d),a)}),i}function rv(e,t){var i={};return t=U(t,3),ut(e,function(a,l,d){yt(i,l,t(a,l,d))}),i}var iv=xn(function(e,t,i){ci(e,t,i)}),Ec=xn(function(e,t,i,a){ci(e,t,i,a)}),sv=xt(function(e,t){var i={};if(e==null)return i;var a=!1;t=ae(t,function(d){return d=Nt(d,e),a||(a=d.length>1),d}),ct(e,Vs(e),i),a&&(i=qe(i,v|m|S,Qd));for(var l=t.length;l--;)Ws(i,t[l]);return i});function ov(e,t){return Tc(e,Ai(U(t)))}var av=xt(function(e,t){return e==null?{}:$d(e,t)});function Tc(e,t){if(e==null)return{};var i=ae(Vs(e),function(a){return[a]});return t=U(t),vu(e,i,function(a,l){return t(a,l[0])})}function uv(e,t,i){t=Nt(t,e);var a=-1,l=t.length;for(l||(l=1,e=s);++a<l;){var d=e==null?s:e[lt(t[a])];d===s&&(a=l,d=i),e=At(d)?d.call(e):d}return e}function cv(e,t,i){return e==null?e:ar(e,t,i)}function lv(e,t,i,a){return a=typeof a=="function"?a:s,e==null?e:ar(e,t,i,a)}var Rc=Fu(_e),Oc=Fu(Oe);function hv(e,t,i){var a=B(e),l=a||jt(e)||En(e);if(t=U(t,4),i==null){var d=e&&e.constructor;l?i=a?new d:[]:ue(e)?i=At(d)?bn(Zr(e)):{}:i={}}return(l?We:ut)(e,function(_,w,b){return t(i,_,w,b)}),i}function fv(e,t){return e==null?!0:Ws(e,t)}function dv(e,t,i){return e==null?e:xu(e,t,qs(i))}function pv(e,t,i,a){return a=typeof a=="function"?a:s,e==null?e:xu(e,t,qs(i),a)}function Tn(e){return e==null?[]:Ss(e,_e(e))}function gv(e){return e==null?[]:Ss(e,Oe(e))}function _v(e,t,i){return i===s&&(i=t,t=s),i!==s&&(i=Je(i),i=i===i?i:0),t!==s&&(t=Je(t),t=t===t?t:0),Jt(Je(e),t,i)}function vv(e,t,i){return t=Et(t),i===s?(i=t,t=0):i=Et(i),e=Je(e),Sd(e,t,i)}function mv(e,t,i){if(i&&typeof i!="boolean"&&Se(e,t,i)&&(t=i=s),i===s&&(typeof t=="boolean"?(i=t,t=s):typeof e=="boolean"&&(i=e,e=s)),e===s&&t===s?(e=0,t=1):(e=Et(e),t===s?(t=e,e=0):t=Et(t)),e>t){var a=e;e=t,t=a}if(i||e%1||t%1){var l=Za();return ye(e+l*(t-e+Yh("1e-"+((l+"").length-1))),t)}return Fs(e,t)}var wv=Sn(function(e,t,i){return t=t.toLowerCase(),e+(i?Ic(t):t)});function Ic(e){return fo(ee(e).toLowerCase())}function Cc(e){return e=ee(e),e&&e.replace(yh,cf).replace(Fh,"")}function yv(e,t,i){e=ee(e),t=$e(t);var a=e.length;i=i===s?a:Jt(W(i),0,a);var l=i;return i-=t.length,i>=0&&e.slice(i,l)==t}function bv(e){return e=ee(e),e&&eh.test(e)?e.replace(aa,lf):e}function xv(e){return e=ee(e),e&&oh.test(e)?e.replace(as,"\\$&"):e}var Sv=Sn(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Av=Sn(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Ev=Pu("toLowerCase");function Tv(e,t,i){e=ee(e),t=W(t);var a=t?vn(e):0;if(!t||a>=t)return e;var l=(t-a)/2;return gi(ni(l),i)+e+gi(ti(l),i)}function Rv(e,t,i){e=ee(e),t=W(t);var a=t?vn(e):0;return t&&a<t?e+gi(t-a,i):e}function Ov(e,t,i){e=ee(e),t=W(t);var a=t?vn(e):0;return t&&a<t?gi(t-a,i)+e:e}function Iv(e,t,i){return i||t==null?t=0:t&&(t=+t),Df(ee(e).replace(us,""),t||0)}function Cv(e,t,i){return(i?Se(e,t,i):t===s)?t=1:t=W(t),js(ee(e),t)}function Lv(){var e=arguments,t=ee(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var kv=Sn(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function Pv(e,t,i){return i&&typeof i!="number"&&Se(e,t,i)&&(t=i=s),i=i===s?at:i>>>0,i?(e=ee(e),e&&(typeof t=="string"||t!=null&&!co(t))&&(t=$e(t),!t&&_n(e))?Ft(tt(e),0,i):e.split(t,i)):[]}var $v=Sn(function(e,t,i){return e+(i?" ":"")+fo(t)});function Uv(e,t,i){return e=ee(e),i=i==null?0:Jt(W(i),0,e.length),t=$e(t),e.slice(i,i+t.length)==t}function Dv(e,t,i){var a=f.templateSettings;i&&Se(e,t,i)&&(t=s),e=ee(e),t=Ri({},t,a,ju);var l=Ri({},t.imports,a.imports,ju),d=_e(l),_=Ss(l,d),w,b,E=0,T=t.interpolate||jr,R="__p += '",L=Es((t.escape||jr).source+"|"+T.source+"|"+(T===ua?ph:jr).source+"|"+(t.evaluate||jr).source+"|$","g"),P="//# sourceURL="+(te.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gh+"]")+`
`;e.replace(L,function(M,K,V,De,Ae,Me){return V||(V=De),R+=e.slice(E,Me).replace(bh,hf),K&&(w=!0,R+=`' +
__e(`+K+`) +
'`),Ae&&(b=!0,R+=`';
`+Ae+`;
__p += '`),V&&(R+=`' +
((__t = (`+V+`)) == null ? '' : __t) +
'`),E=Me+M.length,M}),R+=`';
`;var D=te.call(t,"variable")&&t.variable;if(!D)R=`with (obj) {
`+R+`
}
`;else if(fh.test(D))throw new j(c);R=(b?R.replace(Vl,""):R).replace(Xl,"$1").replace(Zl,"$1;"),R="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(w?", __e = _.escape":"")+(b?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+R+`return __p
}`;var G=kc(function(){return Q(d,P+"return "+R).apply(s,_)});if(G.source=R,uo(G))throw G;return G}function Mv(e){return ee(e).toLowerCase()}function Nv(e){return ee(e).toUpperCase()}function Fv(e,t,i){if(e=ee(e),e&&(i||t===s))return Ba(e);if(!e||!(t=$e(t)))return e;var a=tt(e),l=tt(t),d=Wa(a,l),_=Ha(a,l)+1;return Ft(a,d,_).join("")}function jv(e,t,i){if(e=ee(e),e&&(i||t===s))return e.slice(0,qa(e)+1);if(!e||!(t=$e(t)))return e;var a=tt(e),l=Ha(a,tt(t))+1;return Ft(a,0,l).join("")}function Bv(e,t,i){if(e=ee(e),e&&(i||t===s))return e.replace(us,"");if(!e||!(t=$e(t)))return e;var a=tt(e),l=Wa(a,tt(t));return Ft(a,l).join("")}function Wv(e,t){var i=st,a=ot;if(ue(t)){var l="separator"in t?t.separator:l;i="length"in t?W(t.length):i,a="omission"in t?$e(t.omission):a}e=ee(e);var d=e.length;if(_n(e)){var _=tt(e);d=_.length}if(i>=d)return e;var w=i-vn(a);if(w<1)return a;var b=_?Ft(_,0,w).join(""):e.slice(0,w);if(l===s)return b+a;if(_&&(w+=b.length-w),co(l)){if(e.slice(w).search(l)){var E,T=b;for(l.global||(l=Es(l.source,ee(ca.exec(l))+"g")),l.lastIndex=0;E=l.exec(T);)var R=E.index;b=b.slice(0,R===s?w:R)}}else if(e.indexOf($e(l),w)!=w){var L=b.lastIndexOf(l);L>-1&&(b=b.slice(0,L))}return b+a}function Hv(e){return e=ee(e),e&&Ql.test(e)?e.replace(oa,mf):e}var Gv=Sn(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),fo=Pu("toUpperCase");function Lc(e,t,i){return e=ee(e),t=i?s:t,t===s?df(e)?bf(e):rf(e):e.match(t)||[]}var kc=q(function(e,t){try{return ke(e,s,t)}catch(i){return uo(i)?i:new j(i)}}),qv=xt(function(e,t){return We(t,function(i){i=lt(i),yt(e,i,oo(e[i],e))}),e});function zv(e){var t=e==null?0:e.length,i=U();return e=t?ae(e,function(a){if(typeof a[1]!="function")throw new He(u);return[i(a[0]),a[1]]}):[],q(function(a){for(var l=-1;++l<t;){var d=e[l];if(ke(d[0],this,a))return ke(d[1],this,a)}})}function Kv(e){return md(qe(e,v))}function po(e){return function(){return e}}function Jv(e,t){return e==null||e!==e?t:e}var Yv=Uu(),Vv=Uu(!0);function Ie(e){return e}function go(e){return hu(typeof e=="function"?e:qe(e,v))}function Xv(e){return du(qe(e,v))}function Zv(e,t){return pu(e,qe(t,v))}var Qv=q(function(e,t){return function(i){return sr(i,e,t)}}),e0=q(function(e,t){return function(i){return sr(e,i,t)}});function _o(e,t,i){var a=_e(t),l=ui(t,a);i==null&&!(ue(t)&&(l.length||!a.length))&&(i=t,t=e,e=this,l=ui(t,_e(t)));var d=!(ue(i)&&"chain"in i)||!!i.chain,_=At(e);return We(l,function(w){var b=t[w];e[w]=b,_&&(e.prototype[w]=function(){var E=this.__chain__;if(d||E){var T=e(this.__wrapped__),R=T.__actions__=Te(this.__actions__);return R.push({func:b,args:arguments,thisArg:e}),T.__chain__=E,T}return b.apply(e,kt([this.value()],arguments))})}),e}function t0(){return ge._===this&&(ge._=Rf),this}function vo(){}function n0(e){return e=W(e),q(function(t){return gu(t,e)})}var r0=Ks(ae),i0=Ks(Da),s0=Ks(ms);function Pc(e){return eo(e)?ws(lt(e)):Ud(e)}function o0(e){return function(t){return e==null?s:Yt(e,t)}}var a0=Mu(),u0=Mu(!0);function mo(){return[]}function wo(){return!1}function c0(){return{}}function l0(){return""}function h0(){return!0}function f0(e,t){if(e=W(e),e<1||e>Ze)return[];var i=at,a=ye(e,at);t=U(t),e-=at;for(var l=xs(a,t);++i<e;)t(i);return l}function d0(e){return B(e)?ae(e,lt):Ue(e)?[e]:Te(Qu(ee(e)))}function p0(e){var t=++Ef;return ee(e)+t}var g0=pi(function(e,t){return e+t},0),_0=Js("ceil"),v0=pi(function(e,t){return e/t},1),m0=Js("floor");function w0(e){return e&&e.length?ai(e,Ie,Ps):s}function y0(e,t){return e&&e.length?ai(e,U(t,2),Ps):s}function b0(e){return Fa(e,Ie)}function x0(e,t){return Fa(e,U(t,2))}function S0(e){return e&&e.length?ai(e,Ie,Ms):s}function A0(e,t){return e&&e.length?ai(e,U(t,2),Ms):s}var E0=pi(function(e,t){return e*t},1),T0=Js("round"),R0=pi(function(e,t){return e-t},0);function O0(e){return e&&e.length?bs(e,Ie):0}function I0(e,t){return e&&e.length?bs(e,U(t,2)):0}return f.after=Xg,f.ary=lc,f.assign=N_,f.assignIn=Ac,f.assignInWith=Ri,f.assignWith=F_,f.at=j_,f.before=hc,f.bind=oo,f.bindAll=qv,f.bindKey=fc,f.castArray=c_,f.chain=ac,f.chunk=mp,f.compact=wp,f.concat=yp,f.cond=zv,f.conforms=Kv,f.constant=po,f.countBy=Og,f.create=B_,f.curry=dc,f.curryRight=pc,f.debounce=gc,f.defaults=W_,f.defaultsDeep=H_,f.defer=Zg,f.delay=Qg,f.difference=bp,f.differenceBy=xp,f.differenceWith=Sp,f.drop=Ap,f.dropRight=Ep,f.dropRightWhile=Tp,f.dropWhile=Rp,f.fill=Op,f.filter=Cg,f.flatMap=Pg,f.flatMapDeep=$g,f.flatMapDepth=Ug,f.flatten=rc,f.flattenDeep=Ip,f.flattenDepth=Cp,f.flip=e_,f.flow=Yv,f.flowRight=Vv,f.fromPairs=Lp,f.functions=V_,f.functionsIn=X_,f.groupBy=Dg,f.initial=Pp,f.intersection=$p,f.intersectionBy=Up,f.intersectionWith=Dp,f.invert=Q_,f.invertBy=ev,f.invokeMap=Ng,f.iteratee=go,f.keyBy=Fg,f.keys=_e,f.keysIn=Oe,f.map=bi,f.mapKeys=nv,f.mapValues=rv,f.matches=Xv,f.matchesProperty=Zv,f.memoize=Si,f.merge=iv,f.mergeWith=Ec,f.method=Qv,f.methodOf=e0,f.mixin=_o,f.negate=Ai,f.nthArg=n0,f.omit=sv,f.omitBy=ov,f.once=t_,f.orderBy=jg,f.over=r0,f.overArgs=n_,f.overEvery=i0,f.overSome=s0,f.partial=ao,f.partialRight=_c,f.partition=Bg,f.pick=av,f.pickBy=Tc,f.property=Pc,f.propertyOf=o0,f.pull=jp,f.pullAll=sc,f.pullAllBy=Bp,f.pullAllWith=Wp,f.pullAt=Hp,f.range=a0,f.rangeRight=u0,f.rearg=r_,f.reject=Gg,f.remove=Gp,f.rest=i_,f.reverse=io,f.sampleSize=zg,f.set=cv,f.setWith=lv,f.shuffle=Kg,f.slice=qp,f.sortBy=Vg,f.sortedUniq=Zp,f.sortedUniqBy=Qp,f.split=Pv,f.spread=s_,f.tail=eg,f.take=tg,f.takeRight=ng,f.takeRightWhile=rg,f.takeWhile=ig,f.tap=wg,f.throttle=o_,f.thru=yi,f.toArray=bc,f.toPairs=Rc,f.toPairsIn=Oc,f.toPath=d0,f.toPlainObject=Sc,f.transform=hv,f.unary=a_,f.union=sg,f.unionBy=og,f.unionWith=ag,f.uniq=ug,f.uniqBy=cg,f.uniqWith=lg,f.unset=fv,f.unzip=so,f.unzipWith=oc,f.update=dv,f.updateWith=pv,f.values=Tn,f.valuesIn=gv,f.without=hg,f.words=Lc,f.wrap=u_,f.xor=fg,f.xorBy=dg,f.xorWith=pg,f.zip=gg,f.zipObject=_g,f.zipObjectDeep=vg,f.zipWith=mg,f.entries=Rc,f.entriesIn=Oc,f.extend=Ac,f.extendWith=Ri,_o(f,f),f.add=g0,f.attempt=kc,f.camelCase=wv,f.capitalize=Ic,f.ceil=_0,f.clamp=_v,f.clone=l_,f.cloneDeep=f_,f.cloneDeepWith=d_,f.cloneWith=h_,f.conformsTo=p_,f.deburr=Cc,f.defaultTo=Jv,f.divide=v0,f.endsWith=yv,f.eq=rt,f.escape=bv,f.escapeRegExp=xv,f.every=Ig,f.find=Lg,f.findIndex=tc,f.findKey=G_,f.findLast=kg,f.findLastIndex=nc,f.findLastKey=q_,f.floor=m0,f.forEach=uc,f.forEachRight=cc,f.forIn=z_,f.forInRight=K_,f.forOwn=J_,f.forOwnRight=Y_,f.get=lo,f.gt=g_,f.gte=__,f.has=Z_,f.hasIn=ho,f.head=ic,f.identity=Ie,f.includes=Mg,f.indexOf=kp,f.inRange=vv,f.invoke=tv,f.isArguments=Zt,f.isArray=B,f.isArrayBuffer=v_,f.isArrayLike=Re,f.isArrayLikeObject=he,f.isBoolean=m_,f.isBuffer=jt,f.isDate=w_,f.isElement=y_,f.isEmpty=b_,f.isEqual=x_,f.isEqualWith=S_,f.isError=uo,f.isFinite=A_,f.isFunction=At,f.isInteger=vc,f.isLength=Ei,f.isMap=mc,f.isMatch=E_,f.isMatchWith=T_,f.isNaN=R_,f.isNative=O_,f.isNil=C_,f.isNull=I_,f.isNumber=wc,f.isObject=ue,f.isObjectLike=ce,f.isPlainObject=hr,f.isRegExp=co,f.isSafeInteger=L_,f.isSet=yc,f.isString=Ti,f.isSymbol=Ue,f.isTypedArray=En,f.isUndefined=k_,f.isWeakMap=P_,f.isWeakSet=$_,f.join=Mp,f.kebabCase=Sv,f.last=Ke,f.lastIndexOf=Np,f.lowerCase=Av,f.lowerFirst=Ev,f.lt=U_,f.lte=D_,f.max=w0,f.maxBy=y0,f.mean=b0,f.meanBy=x0,f.min=S0,f.minBy=A0,f.stubArray=mo,f.stubFalse=wo,f.stubObject=c0,f.stubString=l0,f.stubTrue=h0,f.multiply=E0,f.nth=Fp,f.noConflict=t0,f.noop=vo,f.now=xi,f.pad=Tv,f.padEnd=Rv,f.padStart=Ov,f.parseInt=Iv,f.random=mv,f.reduce=Wg,f.reduceRight=Hg,f.repeat=Cv,f.replace=Lv,f.result=uv,f.round=T0,f.runInContext=y,f.sample=qg,f.size=Jg,f.snakeCase=kv,f.some=Yg,f.sortedIndex=zp,f.sortedIndexBy=Kp,f.sortedIndexOf=Jp,f.sortedLastIndex=Yp,f.sortedLastIndexBy=Vp,f.sortedLastIndexOf=Xp,f.startCase=$v,f.startsWith=Uv,f.subtract=R0,f.sum=O0,f.sumBy=I0,f.template=Dv,f.times=f0,f.toFinite=Et,f.toInteger=W,f.toLength=xc,f.toLower=Mv,f.toNumber=Je,f.toSafeInteger=M_,f.toString=ee,f.toUpper=Nv,f.trim=Fv,f.trimEnd=jv,f.trimStart=Bv,f.truncate=Wv,f.unescape=Hv,f.uniqueId=p0,f.upperCase=Gv,f.upperFirst=fo,f.each=uc,f.eachRight=cc,f.first=ic,_o(f,function(){var e={};return ut(f,function(t,i){te.call(f.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),f.VERSION=n,We(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),We(["drop","take"],function(e,t){Y.prototype[e]=function(i){i=i===s?1:pe(W(i),0);var a=this.__filtered__&&!t?new Y(this):this.clone();return a.__filtered__?a.__takeCount__=ye(i,a.__takeCount__):a.__views__.push({size:ye(i,at),type:e+(a.__dir__<0?"Right":"")}),a},Y.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),We(["filter","map","takeWhile"],function(e,t){var i=t+1,a=i==_t||i==Le;Y.prototype[e]=function(l){var d=this.clone();return d.__iteratees__.push({iteratee:U(l,3),type:i}),d.__filtered__=d.__filtered__||a,d}}),We(["head","last"],function(e,t){var i="take"+(t?"Right":"");Y.prototype[e]=function(){return this[i](1).value()[0]}}),We(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Y.prototype[e]=function(){return this.__filtered__?new Y(this):this[i](1)}}),Y.prototype.compact=function(){return this.filter(Ie)},Y.prototype.find=function(e){return this.filter(e).head()},Y.prototype.findLast=function(e){return this.reverse().find(e)},Y.prototype.invokeMap=q(function(e,t){return typeof e=="function"?new Y(this):this.map(function(i){return sr(i,e,t)})}),Y.prototype.reject=function(e){return this.filter(Ai(U(e)))},Y.prototype.slice=function(e,t){e=W(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Y(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==s&&(t=W(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Y.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Y.prototype.toArray=function(){return this.take(at)},ut(Y.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),l=f[a?"take"+(t=="last"?"Right":""):t],d=a||/^find/.test(t);l&&(f.prototype[t]=function(){var _=this.__wrapped__,w=a?[1]:arguments,b=_ instanceof Y,E=w[0],T=b||B(_),R=function(K){var V=l.apply(f,kt([K],w));return a&&L?V[0]:V};T&&i&&typeof E=="function"&&E.length!=1&&(b=T=!1);var L=this.__chain__,P=!!this.__actions__.length,D=d&&!L,G=b&&!P;if(!d&&T){_=G?_:new Y(this);var M=e.apply(_,w);return M.__actions__.push({func:yi,args:[R],thisArg:s}),new Ge(M,L)}return D&&G?e.apply(this,w):(M=this.thru(R),D?a?M.value()[0]:M.value():M)})}),We(["pop","push","shift","sort","splice","unshift"],function(e){var t=zr[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var l=arguments;if(a&&!this.__chain__){var d=this.value();return t.apply(B(d)?d:[],l)}return this[i](function(_){return t.apply(B(_)?_:[],l)})}}),ut(Y.prototype,function(e,t){var i=f[t];if(i){var a=i.name+"";te.call(yn,a)||(yn[a]=[]),yn[a].push({name:t,func:i})}}),yn[di(s,$).name]=[{name:"wrapper",func:s}],Y.prototype.clone=Hf,Y.prototype.reverse=Gf,Y.prototype.value=qf,f.prototype.at=yg,f.prototype.chain=bg,f.prototype.commit=xg,f.prototype.next=Sg,f.prototype.plant=Eg,f.prototype.reverse=Tg,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=Rg,f.prototype.first=f.prototype.head,Zn&&(f.prototype[Zn]=Ag),f},$t=xf();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ge._=$t,define(function(){return $t})):Gt?((Gt.exports=$t)._=$t,ps._=$t):ge._=$t}).call(Rn)});var In={};D0(In,{Headers:()=>jo,Request:()=>ym,Response:()=>bm,default:()=>pr,fetch:()=>wm});var mm,On,wm,pr,jo,ym,bm,Bt=U0(()=>{"use strict";mm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},On=mm(),wm=On.fetch,pr=On.fetch.bind(On),jo=On.Headers,ym=On.Request,bm=On.Response});var il=Uc((Xw,rl)=>{"use strict";rl.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});function Rt(s){return Array.isArray?Array.isArray(s):Hc(s)==="[object Array]"}var N0=1/0;function F0(s){if(typeof s=="string")return s;let n=s+"";return n=="0"&&1/s==-N0?"-0":n}function j0(s){return s==null?"":F0(s)}function ht(s){return typeof s=="string"}function Bc(s){return typeof s=="number"}function B0(s){return s===!0||s===!1||W0(s)&&Hc(s)=="[object Boolean]"}function Wc(s){return typeof s=="object"}function W0(s){return Wc(s)&&s!==null}function Ne(s){return s!=null}function xo(s){return!s.trim().length}function Hc(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}var H0="Incorrect 'index' type",G0=s=>`Invalid value for key ${s}`,q0=s=>`Pattern length exceeds max of ${s}.`,z0=s=>`Missing ${s} property in key`,K0=s=>`Property 'weight' in key '${s}' must be a positive integer`,Dc=Object.prototype.hasOwnProperty,So=class{constructor(n){this._keys=[],this._keyMap={};let r=0;n.forEach(o=>{let u=Gc(o);this._keys.push(u),this._keyMap[u.id]=u,r+=u.weight}),this._keys.forEach(o=>{o.weight/=r})}get(n){return this._keyMap[n]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Gc(s){let n=null,r=null,o=null,u=1,c=null;if(ht(s)||Rt(s))o=s,n=Mc(s),r=Ao(s);else{if(!Dc.call(s,"name"))throw new Error(z0("name"));let h=s.name;if(o=h,Dc.call(s,"weight")&&(u=s.weight,u<=0))throw new Error(K0(h));n=Mc(h),r=Ao(h),c=s.getFn}return{path:n,id:r,weight:u,src:o,getFn:c}}function Mc(s){return Rt(s)?s:s.split(".")}function Ao(s){return Rt(s)?s.join("."):s}function J0(s,n){let r=[],o=!1,u=(c,h,p)=>{if(Ne(c))if(!h[p])r.push(c);else{let g=h[p],v=c[g];if(!Ne(v))return;if(p===h.length-1&&(ht(v)||Bc(v)||B0(v)))r.push(j0(v));else if(Rt(v)){o=!0;for(let m=0,S=v.length;m<S;m+=1)u(v[m],h,p+1)}else h.length&&u(v,h,p+1)}};return u(s,ht(n)?n.split("."):n,0),o?r:r[0]}var Y0={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},V0={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,n)=>s.score===n.score?s.idx<n.idx?-1:1:s.score<n.score?-1:1},X0={location:0,threshold:.6,distance:100},Z0={useExtendedSearch:!1,getFn:J0,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},N={...V0,...Y0,...X0,...Z0},Q0=/[^ ]+/g;function em(s=1,n=3){let r=new Map,o=Math.pow(10,n);return{get(u){let c=u.match(Q0).length;if(r.has(c))return r.get(c);let h=1/Math.pow(c,.5*s),p=parseFloat(Math.round(h*o)/o);return r.set(c,p),p},clear(){r.clear()}}}var fr=class{constructor({getFn:n=N.getFn,fieldNormWeight:r=N.fieldNormWeight}={}){this.norm=em(r,3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}setSources(n=[]){this.docs=n}setIndexRecords(n=[]){this.records=n}setKeys(n=[]){this.keys=n,this._keysMap={},n.forEach((r,o)=>{this._keysMap[r.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ht(this.docs[0])?this.docs.forEach((n,r)=>{this._addString(n,r)}):this.docs.forEach((n,r)=>{this._addObject(n,r)}),this.norm.clear())}add(n){let r=this.size();ht(n)?this._addString(n,r):this._addObject(n,r)}removeAt(n){this.records.splice(n,1);for(let r=n,o=this.size();r<o;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(n,r){return n[this._keysMap[r]]}size(){return this.records.length}_addString(n,r){if(!Ne(n)||xo(n))return;let o={v:n,i:r,n:this.norm.get(n)};this.records.push(o)}_addObject(n,r){let o={i:r,$:{}};this.keys.forEach((u,c)=>{let h=u.getFn?u.getFn(n):this.getFn(n,u.path);if(Ne(h)){if(Rt(h)){let p=[],g=[{nestedArrIndex:-1,value:h}];for(;g.length;){let{nestedArrIndex:v,value:m}=g.pop();if(Ne(m))if(ht(m)&&!xo(m)){let S={v:m,i:v,n:this.norm.get(m)};p.push(S)}else Rt(m)&&m.forEach((S,O)=>{g.push({nestedArrIndex:O,value:S})})}o.$[c]=p}else if(ht(h)&&!xo(h)){let p={v:h,n:this.norm.get(h)};o.$[c]=p}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}};function qc(s,n,{getFn:r=N.getFn,fieldNormWeight:o=N.fieldNormWeight}={}){let u=new fr({getFn:r,fieldNormWeight:o});return u.setKeys(s.map(Gc)),u.setSources(n),u.create(),u}function tm(s,{getFn:n=N.getFn,fieldNormWeight:r=N.fieldNormWeight}={}){let{keys:o,records:u}=s,c=new fr({getFn:n,fieldNormWeight:r});return c.setKeys(o),c.setIndexRecords(u),c}function Oi(s,{errors:n=0,currentLocation:r=0,expectedLocation:o=0,distance:u=N.distance,ignoreLocation:c=N.ignoreLocation}={}){let h=n/s.length;if(c)return h;let p=Math.abs(o-r);return u?h+p/u:p?1:h}function nm(s=[],n=N.minMatchCharLength){let r=[],o=-1,u=-1,c=0;for(let h=s.length;c<h;c+=1){let p=s[c];p&&o===-1?o=c:!p&&o!==-1&&(u=c-1,u-o+1>=n&&r.push([o,u]),o=-1)}return s[c-1]&&c-o>=n&&r.push([o,c-1]),r}var Qt=32;function rm(s,n,r,{location:o=N.location,distance:u=N.distance,threshold:c=N.threshold,findAllMatches:h=N.findAllMatches,minMatchCharLength:p=N.minMatchCharLength,includeMatches:g=N.includeMatches,ignoreLocation:v=N.ignoreLocation}={}){if(n.length>Qt)throw new Error(q0(Qt));let m=n.length,S=s.length,O=Math.max(0,Math.min(o,S)),I=c,C=O,$=p>1||g,F=$?Array(S):[],H;for(;(H=s.indexOf(n,C))>-1;){let we=Oi(n,{currentLocation:H,expectedLocation:O,distance:u,ignoreLocation:v});if(I=Math.min(we,I),C=H+m,$){let st=0;for(;st<m;)F[H+st]=1,st+=1}}C=-1;let re=[],Z=1,X=m+S,le=1<<m-1;for(let we=0;we<m;we+=1){let st=0,ot=X;for(;st<ot;)Oi(n,{errors:we,currentLocation:O+ot,expectedLocation:O,distance:u,ignoreLocation:v})<=I?st=ot:X=ot,ot=Math.floor((X-st)/2+st);X=ot;let $r=Math.max(1,O-ot+1),Hn=h?S:Math.min(O+ot,S)+m,_t=Array(Hn+2);_t[Hn+1]=(1<<we)-1;for(let Le=Hn;Le>=$r;Le-=1){let je=Le-1,Ze=r[s.charAt(je)];if($&&(F[je]=+!!Ze),_t[Le]=(_t[Le+1]<<1|1)&Ze,we&&(_t[Le]|=(re[Le+1]|re[Le])<<1|1|re[Le+1]),_t[Le]&le&&(Z=Oi(n,{errors:we,currentLocation:je,expectedLocation:O,distance:u,ignoreLocation:v}),Z<=I)){if(I=Z,C=je,C<=O)break;$r=Math.max(1,2*O-C)}}if(Oi(n,{errors:we+1,currentLocation:O,expectedLocation:O,distance:u,ignoreLocation:v})>I)break;re=_t}let Ee={isMatch:C>=0,score:Math.max(.001,Z)};if($){let we=nm(F,p);we.length?g&&(Ee.indices=we):Ee.isMatch=!1}return Ee}function im(s){let n={};for(let r=0,o=s.length;r<o;r+=1){let u=s.charAt(r);n[u]=(n[u]||0)|1<<o-r-1}return n}var Ii=class{constructor(n,{location:r=N.location,threshold:o=N.threshold,distance:u=N.distance,includeMatches:c=N.includeMatches,findAllMatches:h=N.findAllMatches,minMatchCharLength:p=N.minMatchCharLength,isCaseSensitive:g=N.isCaseSensitive,ignoreLocation:v=N.ignoreLocation}={}){if(this.options={location:r,threshold:o,distance:u,includeMatches:c,findAllMatches:h,minMatchCharLength:p,isCaseSensitive:g,ignoreLocation:v},this.pattern=g?n:n.toLowerCase(),this.chunks=[],!this.pattern.length)return;let m=(O,I)=>{this.chunks.push({pattern:O,alphabet:im(O),startIndex:I})},S=this.pattern.length;if(S>Qt){let O=0,I=S%Qt,C=S-I;for(;O<C;)m(this.pattern.substr(O,Qt),O),O+=Qt;if(I){let $=S-Qt;m(this.pattern.substr($),$)}}else m(this.pattern,0)}searchIn(n){let{isCaseSensitive:r,includeMatches:o}=this.options;if(r||(n=n.toLowerCase()),this.pattern===n){let C={isMatch:!0,score:0};return o&&(C.indices=[[0,n.length-1]]),C}let{location:u,distance:c,threshold:h,findAllMatches:p,minMatchCharLength:g,ignoreLocation:v}=this.options,m=[],S=0,O=!1;this.chunks.forEach(({pattern:C,alphabet:$,startIndex:F})=>{let{isMatch:H,score:re,indices:Z}=rm(n,C,$,{location:u+F,distance:c,threshold:h,findAllMatches:p,minMatchCharLength:g,includeMatches:o,ignoreLocation:v});H&&(O=!0),S+=re,H&&Z&&(m=[...m,...Z])});let I={isMatch:O,score:O?S/this.chunks.length:1};return O&&o&&(I.indices=m),I}},ft=class{constructor(n){this.pattern=n}static isMultiMatch(n){return Nc(n,this.multiRegex)}static isSingleMatch(n){return Nc(n,this.singleRegex)}search(){}};function Nc(s,n){let r=s.match(n);return r?r[1]:null}var Eo=class extends ft{constructor(n){super(n)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(n){let r=n===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},To=class extends ft{constructor(n){super(n)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(n){let o=n.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,n.length-1]}}},Ro=class extends ft{constructor(n){super(n)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(n){let r=n.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Oo=class extends ft{constructor(n){super(n)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(n){let r=!n.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,n.length-1]}}},Io=class extends ft{constructor(n){super(n)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(n){let r=n.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[n.length-this.pattern.length,n.length-1]}}},Co=class extends ft{constructor(n){super(n)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(n){let r=!n.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,n.length-1]}}},Ci=class extends ft{constructor(n,{location:r=N.location,threshold:o=N.threshold,distance:u=N.distance,includeMatches:c=N.includeMatches,findAllMatches:h=N.findAllMatches,minMatchCharLength:p=N.minMatchCharLength,isCaseSensitive:g=N.isCaseSensitive,ignoreLocation:v=N.ignoreLocation}={}){super(n),this._bitapSearch=new Ii(n,{location:r,threshold:o,distance:u,includeMatches:c,findAllMatches:h,minMatchCharLength:p,isCaseSensitive:g,ignoreLocation:v})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(n){return this._bitapSearch.searchIn(n)}},Li=class extends ft{constructor(n){super(n)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(n){let r=0,o,u=[],c=this.pattern.length;for(;(o=n.indexOf(this.pattern,r))>-1;)r=o+c,u.push([o,r-1]);let h=!!u.length;return{isMatch:h,score:h?0:1,indices:u}}},Lo=[Eo,Li,Ro,Oo,Co,Io,To,Ci],Fc=Lo.length,sm=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,om="|";function am(s,n={}){return s.split(om).map(r=>{let o=r.trim().split(sm).filter(c=>c&&!!c.trim()),u=[];for(let c=0,h=o.length;c<h;c+=1){let p=o[c],g=!1,v=-1;for(;!g&&++v<Fc;){let m=Lo[v],S=m.isMultiMatch(p);S&&(u.push(new m(S,n)),g=!0)}if(!g)for(v=-1;++v<Fc;){let m=Lo[v],S=m.isSingleMatch(p);if(S){u.push(new m(S,n));break}}}return u})}var um=new Set([Ci.type,Li.type]),ko=class{constructor(n,{isCaseSensitive:r=N.isCaseSensitive,includeMatches:o=N.includeMatches,minMatchCharLength:u=N.minMatchCharLength,ignoreLocation:c=N.ignoreLocation,findAllMatches:h=N.findAllMatches,location:p=N.location,threshold:g=N.threshold,distance:v=N.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:o,minMatchCharLength:u,findAllMatches:h,ignoreLocation:c,location:p,threshold:g,distance:v},this.pattern=r?n:n.toLowerCase(),this.query=am(this.pattern,this.options)}static condition(n,r){return r.useExtendedSearch}searchIn(n){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:o,isCaseSensitive:u}=this.options;n=u?n:n.toLowerCase();let c=0,h=[],p=0;for(let g=0,v=r.length;g<v;g+=1){let m=r[g];h.length=0,c=0;for(let S=0,O=m.length;S<O;S+=1){let I=m[S],{isMatch:C,indices:$,score:F}=I.search(n);if(C){if(c+=1,p+=F,o){let H=I.constructor.type;um.has(H)?h=[...h,...$]:h.push($)}}else{p=0,c=0,h.length=0;break}}if(c){let S={isMatch:!0,score:p/c};return o&&(S.indices=h),S}}return{isMatch:!1,score:1}}},Po=[];function cm(...s){Po.push(...s)}function $o(s,n){for(let r=0,o=Po.length;r<o;r+=1){let u=Po[r];if(u.condition(s,n))return new u(s,n)}return new Ii(s,n)}var ki={AND:"$and",OR:"$or"},Uo={PATH:"$path",PATTERN:"$val"},Do=s=>!!(s[ki.AND]||s[ki.OR]),lm=s=>!!s[Uo.PATH],hm=s=>!Rt(s)&&Wc(s)&&!Do(s),jc=s=>({[ki.AND]:Object.keys(s).map(n=>({[n]:s[n]}))});function zc(s,n,{auto:r=!0}={}){let o=u=>{let c=Object.keys(u),h=lm(u);if(!h&&c.length>1&&!Do(u))return o(jc(u));if(hm(u)){let g=h?u[Uo.PATH]:c[0],v=h?u[Uo.PATTERN]:u[g];if(!ht(v))throw new Error(G0(g));let m={keyId:Ao(g),pattern:v};return r&&(m.searcher=$o(v,n)),m}let p={children:[],operator:c[0]};return c.forEach(g=>{let v=u[g];Rt(v)&&v.forEach(m=>{p.children.push(o(m))})}),p};return Do(s)||(s=jc(s)),o(s)}function fm(s,{ignoreFieldNorm:n=N.ignoreFieldNorm}){s.forEach(r=>{let o=1;r.matches.forEach(({key:u,norm:c,score:h})=>{let p=u?u.weight:null;o*=Math.pow(h===0&&p?Number.EPSILON:h,(p||1)*(n?1:c))}),r.score=o})}function dm(s,n){let r=s.matches;n.matches=[],Ne(r)&&r.forEach(o=>{if(!Ne(o.indices)||!o.indices.length)return;let{indices:u,value:c}=o,h={indices:u,value:c};o.key&&(h.key=o.key.src),o.idx>-1&&(h.refIndex=o.idx),n.matches.push(h)})}function pm(s,n){n.score=s.score}function gm(s,n,{includeMatches:r=N.includeMatches,includeScore:o=N.includeScore}={}){let u=[];return r&&u.push(dm),o&&u.push(pm),s.map(c=>{let{idx:h}=c,p={item:n[h],refIndex:h};return u.length&&u.forEach(g=>{g(c,p)}),p})}var Ot=class{constructor(n,r={},o){this.options={...N,...r},this.options.useExtendedSearch,this._keyStore=new So(this.options.keys),this.setCollection(n,o)}setCollection(n,r){if(this._docs=n,r&&!(r instanceof fr))throw new Error(H0);this._myIndex=r||qc(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(n){Ne(n)&&(this._docs.push(n),this._myIndex.add(n))}remove(n=()=>!1){let r=[];for(let o=0,u=this._docs.length;o<u;o+=1){let c=this._docs[o];n(c,o)&&(this.removeAt(o),o-=1,u-=1,r.push(c))}return r}removeAt(n){this._docs.splice(n,1),this._myIndex.removeAt(n)}getIndex(){return this._myIndex}search(n,{limit:r=-1}={}){let{includeMatches:o,includeScore:u,shouldSort:c,sortFn:h,ignoreFieldNorm:p}=this.options,g=ht(n)?ht(this._docs[0])?this._searchStringList(n):this._searchObjectList(n):this._searchLogical(n);return fm(g,{ignoreFieldNorm:p}),c&&g.sort(h),Bc(r)&&r>-1&&(g=g.slice(0,r)),gm(g,this._docs,{includeMatches:o,includeScore:u})}_searchStringList(n){let r=$o(n,this.options),{records:o}=this._myIndex,u=[];return o.forEach(({v:c,i:h,n:p})=>{if(!Ne(c))return;let{isMatch:g,score:v,indices:m}=r.searchIn(c);g&&u.push({item:c,idx:h,matches:[{score:v,value:c,norm:p,indices:m}]})}),u}_searchLogical(n){let r=zc(n,this.options),o=(p,g,v)=>{if(!p.children){let{keyId:S,searcher:O}=p,I=this._findMatches({key:this._keyStore.get(S),value:this._myIndex.getValueForItemAtKeyId(g,S),searcher:O});return I&&I.length?[{idx:v,item:g,matches:I}]:[]}let m=[];for(let S=0,O=p.children.length;S<O;S+=1){let I=p.children[S],C=o(I,g,v);if(C.length)m.push(...C);else if(p.operator===ki.AND)return[]}return m},u=this._myIndex.records,c={},h=[];return u.forEach(({$:p,i:g})=>{if(Ne(p)){let v=o(r,p,g);v.length&&(c[g]||(c[g]={idx:g,item:p,matches:[]},h.push(c[g])),v.forEach(({matches:m})=>{c[g].matches.push(...m)}))}}),h}_searchObjectList(n){let r=$o(n,this.options),{keys:o,records:u}=this._myIndex,c=[];return u.forEach(({$:h,i:p})=>{if(!Ne(h))return;let g=[];o.forEach((v,m)=>{g.push(...this._findMatches({key:v,value:h[m],searcher:r}))}),g.length&&c.push({idx:p,item:h,matches:g})}),c}_findMatches({key:n,value:r,searcher:o}){if(!Ne(r))return[];let u=[];if(Rt(r))r.forEach(({v:c,i:h,n:p})=>{if(!Ne(c))return;let{isMatch:g,score:v,indices:m}=o.searchIn(c);g&&u.push({score:v,key:n,value:c,idx:h,norm:p,indices:m})});else{let{v:c,n:h}=r,{isMatch:p,score:g,indices:v}=o.searchIn(c);p&&u.push({score:g,key:n,value:c,norm:h,indices:v})}return u}};Ot.version="7.0.0";Ot.createIndex=qc;Ot.parseIndex=tm;Ot.config=N;Ot.parseQuery=zc;cm(ko);var Kc=bo(Mo(),1),No=null;function _m(s){No=new Ot(s,{keys:["full_name","team","location"]})}function vm(s){return No?No.search(s):[]}function Jc(s,n){let r=document.querySelector("#search-input");if(!r)return;let o=c=>{if(c.trim().length===0)n(s);else{let p=vm(c);n(p.map(g=>g.item))}},u=Kc.default.debounce(o,300);_m(s),r.addEventListener("input",c=>{let h=c.target.value;u.cancel(),u(h)})}var Fo=bo(Mo(),1);function Pi(s){let r=document.querySelector(".leaderboard-table").querySelector("tbody");r.childNodes.length>0&&(r.innerHTML="");let u=s.map(h=>({...h,flips:h.flips_1+h.flips_2,timeCompleted:h.time_completed_1+h.time_completed_2})).filter(h=>h.flips!==0&&h.timeCompleted!==0);Fo.default.sortBy(u,["timeCompleted","flips"]).forEach((h,p)=>{let g=p+1,v=h.full_name,m=h.timeCompleted,S=h.flips,O=h.team,I=h.location,C=document.createElement("tr");C.classList.add("leaderboard-tr"),C.classList.add("in-body");let $=document.createElement("td");$.classList.add("leaderboard-td"),$.classList.add("center"),$.innerHTML=g;let F=document.createElement("td");F.classList.add("leaderboard-td"),F.innerHTML=v;let H=document.createElement("td"),re=parseInt(m/60),Z=m-re*60;H.classList.add("leaderboard-td"),H.classList.add("center"),H.innerHTML=`${re}:${Fo.default.padStart(Z,2,"0")}`;let X=document.createElement("td");X.classList.add("leaderboard-td"),X.classList.add("center"),X.innerHTML=S;let le=document.createElement("td");le.classList.add("leaderboard-td"),le.classList.add("center"),le.innerHTML=O;let Ee=document.createElement("td");Ee.classList.add("leaderboard-td"),Ee.classList.add("center"),Ee.innerHTML=I,C.appendChild($),C.appendChild(F),C.appendChild(H),C.appendChild(X),C.appendChild(le),C.appendChild(Ee),r.appendChild(C)})}var Yc=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>Promise.resolve().then(()=>(Bt(),In)).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)};var gr=class extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}},$i=class extends gr{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}},Ui=class extends gr{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}},Di=class extends gr{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}},Mi;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Mi||(Mi={}));var xm=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},_r=class{constructor(n,{headers:r={},customFetch:o,region:u=Mi.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=Yc(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var o;return xm(this,void 0,void 0,function*(){try{let{headers:u,method:c,body:h}=r,p={},{region:g}=r;g||(g=this.region),g&&g!=="any"&&(p["x-region"]=g);let v;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",v=h):typeof h=="string"?(p["Content-Type"]="text/plain",v=h):typeof FormData<"u"&&h instanceof FormData?v=h:(p["Content-Type"]="application/json",v=JSON.stringify(h)));let m=yield this.fetch(`${this.url}/${n}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),u),body:v}).catch(C=>{throw new $i(C)}),S=m.headers.get("x-relay-error");if(S&&S==="true")throw new Ui(m);if(!m.ok)throw new Di(m);let O=((o=m.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),I;return O==="application/json"?I=yield m.json():O==="application/octet-stream"?I=yield m.blob():O==="text/event-stream"?I=m:O==="multipart/form-data"?I=yield m.formData():I=yield m.text(),{data:I,error:null}}catch(u){return{data:null,error:u}}})}};Bt();var vr=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}};var Cn=class{constructor(n){this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=n.headers,this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=n.shouldThrowOnError,this.signal=n.signal,this.isMaybeSingle=n.isMaybeSingle,n.fetch?this.fetch=n.fetch:typeof fetch>"u"?this.fetch=pr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(n,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let o=this.fetch,u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var h,p,g;let v=null,m=null,S=null,O=c.status,I=c.statusText;if(c.ok){if(this.method!=="HEAD"){let H=await c.text();H===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=H:m=JSON.parse(H))}let $=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),F=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");$&&F&&F.length>1&&(S=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(v={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,S=null,O=406,I="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{let $=await c.text();try{v=JSON.parse($),Array.isArray(v)&&c.status===404&&(m=[],v=null,O=200,I="OK")}catch{c.status===404&&$===""?(O=204,I="No Content"):v={message:$}}if(v&&this.isMaybeSingle&&(!((g=v?.details)===null||g===void 0)&&g.includes("0 rows"))&&(v=null,O=200,I="OK"),v&&this.shouldThrowOnError)throw new vr(v)}return{error:v,data:m,count:S,status:O,statusText:I}});return this.shouldThrowOnError||(u=u.catch(c=>{var h,p,g;return{error:{message:`${(h=c?.name)!==null&&h!==void 0?h:"FetchError"}: ${c?.message}`,details:`${(p=c?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=c?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),u.then(n,r)}};var Ln=class extends Cn{select(n){let r=!1,o=(n??"*").split("").map(u=>/\s/.test(u)&&!r?"":(u==='"'&&(r=!r),u)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:r=!0,nullsFirst:o,foreignTable:u,referencedTable:c=u}={}){let h=c?`${c}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${n}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:r,referencedTable:o=r}={}){let u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${n}`),this}range(n,r,{foreignTable:o,referencedTable:u=o}={}){let c=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(h,`${r-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:r=!1,settings:o=!1,buffers:u=!1,wal:c=!1,format:h="text"}={}){var p;let g=[n?"analyze":null,r?"verbose":null,o?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`,h==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};var Ye=class extends Ln{eq(n,r){return this.url.searchParams.append(n,`eq.${r}`),this}neq(n,r){return this.url.searchParams.append(n,`neq.${r}`),this}gt(n,r){return this.url.searchParams.append(n,`gt.${r}`),this}gte(n,r){return this.url.searchParams.append(n,`gte.${r}`),this}lt(n,r){return this.url.searchParams.append(n,`lt.${r}`),this}lte(n,r){return this.url.searchParams.append(n,`lte.${r}`),this}like(n,r){return this.url.searchParams.append(n,`like.${r}`),this}likeAllOf(n,r){return this.url.searchParams.append(n,`like(all).{${r.join(",")}}`),this}likeAnyOf(n,r){return this.url.searchParams.append(n,`like(any).{${r.join(",")}}`),this}ilike(n,r){return this.url.searchParams.append(n,`ilike.${r}`),this}ilikeAllOf(n,r){return this.url.searchParams.append(n,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(n,r){return this.url.searchParams.append(n,`ilike(any).{${r.join(",")}}`),this}is(n,r){return this.url.searchParams.append(n,`is.${r}`),this}in(n,r){let o=Array.from(new Set(r)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cs.{${r.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(r)}`),this}containedBy(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cd.{${r.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(r)}`),this}rangeGt(n,r){return this.url.searchParams.append(n,`sr.${r}`),this}rangeGte(n,r){return this.url.searchParams.append(n,`nxl.${r}`),this}rangeLt(n,r){return this.url.searchParams.append(n,`sl.${r}`),this}rangeLte(n,r){return this.url.searchParams.append(n,`nxr.${r}`),this}rangeAdjacent(n,r){return this.url.searchParams.append(n,`adj.${r}`),this}overlaps(n,r){return typeof r=="string"?this.url.searchParams.append(n,`ov.${r}`):this.url.searchParams.append(n,`ov.{${r.join(",")}}`),this}textSearch(n,r,{config:o,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");let h=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${c}fts${h}.${r}`),this}match(n){return Object.entries(n).forEach(([r,o])=>{this.url.searchParams.append(r,`eq.${o}`)}),this}not(n,r,o){return this.url.searchParams.append(n,`not.${r}.${o}`),this}or(n,{foreignTable:r,referencedTable:o=r}={}){let u=o?`${o}.or`:"or";return this.url.searchParams.append(u,`(${n})`),this}filter(n,r,o){return this.url.searchParams.append(n,`${r}.${o}`),this}};var kn=class{constructor(n,{headers:r={},schema:o,fetch:u}){this.url=n,this.headers=r,this.schema=o,this.fetch=u}select(n,{head:r=!1,count:o}={}){let u=r?"HEAD":"GET",c=!1,h=(n??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",h),o&&(this.headers.Prefer=`count=${o}`),new Ye({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:r,defaultToNull:o=!0}={}){let u="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),r&&c.push(`count=${r}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){let h=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){let p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new Ye({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:r,ignoreDuplicates:o=!1,count:u,defaultToNull:c=!0}={}){let h="POST",p=[`resolution=${o?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),c||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(n)){let g=n.reduce((v,m)=>v.concat(Object.keys(m)),[]);if(g.length>0){let v=[...new Set(g)].map(m=>`"${m}"`);this.url.searchParams.set("columns",v.join(","))}}return new Ye({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:r}={}){let o="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),r&&u.push(`count=${r}`),this.headers.Prefer=u.join(","),new Ye({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){let r="DELETE",o=[];return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new Ye({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Vc="1.15.2";var Xc={"X-Client-Info":`postgrest-js/${Vc}`};var Pn=class s{constructor(n,{headers:r={},schema:o,fetch:u}={}){this.url=n,this.headers=Object.assign(Object.assign({},Xc),r),this.schemaName=o,this.fetch=u}from(n){let r=new URL(`${this.url}/${n}`);return new kn(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new s(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:o=!1,get:u=!1,count:c}={}){let h,p=new URL(`${this.url}/rpc/${n}`),g;o||u?(h=o?"HEAD":"GET",Object.entries(r).filter(([m,S])=>S!==void 0).map(([m,S])=>[m,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([m,S])=>{p.searchParams.append(m,S)})):(h="POST",g=r);let v=Object.assign({},this.headers);return c&&(v.Prefer=`count=${c}`),new Ye({method:h,url:p,headers:v,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}};var Zc="2.9.5";var Qc={"X-Client-Info":`realtime-js/${Zc}`},el="1.0.0",Fi=1e4,tl=1e3,en;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(en||(en={}));var Ce;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ce||(Ce={}));var Fe;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Fe||(Fe={}));var Ni;(function(s){s.websocket="websocket"})(Ni||(Ni={}));var Wt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Wt||(Wt={}));var tn=class{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var mr=class{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){let r=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,r,o)}_decodeBroadcast(n,r,o){let u=r.getUint8(1),c=r.getUint8(2),h=this.HEADER_LENGTH+2,p=o.decode(n.slice(h,h+u));h=h+u;let g=o.decode(n.slice(h,h+c));h=h+c;let v=JSON.parse(o.decode(n.slice(h,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}};var nn=class{constructor(n,r,o={},u=Fi){this.channel=n,this.event=r,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}};var Bo;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Bo||(Bo={}));var $n=class s{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{let{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=s.syncState(this.state,u,c,h),this.pendingDiffs.forEach(g=>{this.state=s.syncDiff(this.state,g,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{let{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=s.syncDiff(this.state,u,c,h),p())}),this.onJoin((u,c,h)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:h})}),this.onLeave((u,c,h)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,u){let c=this.cloneDeep(n),h=this.transformState(r),p={},g={};return this.map(c,(v,m)=>{h[v]||(g[v]=m)}),this.map(h,(v,m)=>{let S=c[v];if(S){let O=m.map(F=>F.presence_ref),I=S.map(F=>F.presence_ref),C=m.filter(F=>I.indexOf(F.presence_ref)<0),$=S.filter(F=>O.indexOf(F.presence_ref)<0);C.length>0&&(p[v]=C),$.length>0&&(g[v]=$)}else p[v]=m}),this.syncDiff(c,{joins:p,leaves:g},o,u)}static syncDiff(n,r,o,u){let{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(c,(p,g)=>{var v;let m=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),m.length>0){let S=n[p].map(I=>I.presence_ref),O=m.filter(I=>S.indexOf(I.presence_ref)<0);n[p].unshift(...O)}o(p,m,g)}),this.map(h,(p,g)=>{let v=n[p];if(!v)return;let m=g.map(S=>S.presence_ref);v=v.filter(S=>m.indexOf(S.presence_ref)<0),n[p]=v,u(p,v,g),v.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{let u=n[o];return"metas"in u?r[o]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[o]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var se;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(se||(se={}));var Ho=(s,n,r={})=>{var o;let u=(o=r.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((c,h)=>(c[h]=Sm(h,s,n,u),c),{})},Sm=(s,n,r,o)=>{let u=n.find(p=>p.name===s),c=u?.type,h=r[s];return c&&!o.includes(c)?nl(c,h):Wo(h)},nl=(s,n)=>{if(s.charAt(0)==="_"){let r=s.slice(1,s.length);return Rm(n,r)}switch(s){case se.bool:return Am(n);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return Em(n);case se.json:case se.jsonb:return Tm(n);case se.timestamp:return Om(n);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Wo(n);default:return Wo(n)}},Wo=s=>s,Am=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Em=s=>{if(typeof s=="string"){let n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Tm=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(n){return console.log(`JSON parse error: ${n}`),s}return s},Rm=(s,n)=>{if(typeof s!="string")return s;let r=s.length-1,o=s[r];if(s[0]==="{"&&o==="}"){let c,h=s.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>nl(n,p))}return s},Om=s=>typeof s=="string"?s.replace(" ","T"):s;var Go;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Go||(Go={}));var qo;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(qo||(qo={}));var zo;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(zo||(zo={}));var Un=class s{constructor(n,r={config:{}},o){this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},r.config),this.timeout=this.socket.timeout,this.joinPush=new nn(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new tn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(u,c)=>{this._trigger(this._replyEventName(c),u)}),this.presence=new $n(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(n,r=this.timeout){var o,u;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:c,presence:h}}=this.params;this._onError(v=>n&&n("CHANNEL_ERROR",v)),this._onClose(()=>n&&n("CLOSED"));let p={},g={broadcast:c,presence:h,postgres_changes:(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(v=>v.filter))!==null&&u!==void 0?u:[]};this.socket.accessToken&&(p.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",({postgres_changes:v})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),v===void 0){n&&n("SUBSCRIBED");return}else{let S=this.bindings.postgres_changes,O=(m=S?.length)!==null&&m!==void 0?m:0,I=[];for(let C=0;C<O;C++){let $=S[C],{filter:{event:F,schema:H,table:re,filter:Z}}=$,X=v&&v[C];if(X&&X.event===F&&X.schema===H&&X.table===re&&X.filter===Z)I.push(Object.assign(Object.assign({},$),{id:X.id}));else{this.unsubscribe(),n&&n("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,n&&n("SUBSCRIBED");return}}).receive("error",v=>{n&&n("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{n&&n("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this._on(n,r,o)}async send(n,r={}){var o,u;if(!this._canPush()&&n.type==="broadcast"){let{event:c,payload:h}=n,p={method:"POST",headers:{apikey:(o=this.socket.apiKey)!==null&&o!==void 0?o:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,p,(u=r.timeout)!==null&&u!==void 0?u:this.timeout)).ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,g;let v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ce.leaving;let r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(o=>{let u=new nn(this,Fe.leave,{},n);u.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),u.send(),this._canPush()||u.trigger("ok",{})})}_broadcastEndpointURL(){let n=this.socket.endPoint;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(n,r,o){let u=new AbortController,c=setTimeout(()=>u.abort(),o),h=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(c),h}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new nn(this,n,r,o);return this._canPush()?u.send():(u.startTimeout(),this.pushBuffer.push(u)),u}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var u,c;let h=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:m}=Fe;if(o&&[p,g,v,m].indexOf(h)>=0&&o!==this._joinRef())return;let O=this._onMessage(h,r,o);if(r&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(I=>{var C,$,F;return((C=I.filter)===null||C===void 0?void 0:C.event)==="*"||((F=($=I.filter)===null||$===void 0?void 0:$.event)===null||F===void 0?void 0:F.toLocaleLowerCase())===h}).map(I=>I.callback(O,o)):(c=this.bindings[h])===null||c===void 0||c.filter(I=>{var C,$,F,H,re,Z;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){let X=I.id,le=(C=I.filter)===null||C===void 0?void 0:C.event;return X&&(($=r.ids)===null||$===void 0?void 0:$.includes(X))&&(le==="*"||le?.toLocaleLowerCase()===((F=r.data)===null||F===void 0?void 0:F.type.toLocaleLowerCase()))}else{let X=(re=(H=I?.filter)===null||H===void 0?void 0:H.event)===null||re===void 0?void 0:re.toLocaleLowerCase();return X==="*"||X===((Z=r?.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof O=="object"&&"ids"in O){let C=O.data,{schema:$,table:F,commit_timestamp:H,type:re,errors:Z}=C;O=Object.assign(Object.assign({},{schema:$,table:F,commit_timestamp:H,eventType:re,new:{},old:{},errors:Z}),this._getPayloadRecords(C))}I.callback(O,o)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){let u=n.toLocaleLowerCase(),c={type:u,filter:r,callback:o};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(n,r){let o=n.toLocaleLowerCase();return this.bindings[o]=this.bindings[o].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&s.isEqual(u.filter,r))}),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(let o in n)if(n[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Fe.close,{},n)}_onError(n){this._on(Fe.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(n))}_getPayloadRecords(n){let r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Ho(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Ho(n.columns,n.old_record)),r}};var Cm=()=>{},Lm=typeof WebSocket<"u",Dn=class{constructor(n,r){var o;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Qc,this.params={},this.timeout=Fi,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Cm,this.conn=null,this.sendBuffer=[],this.serializer=new mr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=c=>{let h;return c?h=c:typeof fetch>"u"?h=(...p)=>Promise.resolve().then(()=>(Bt(),In)).then(({default:g})=>g(...p)):h=fetch,(...p)=>h(...p)},this.endPoint=`${n}/${Ni.websocket}`,r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);let u=(o=r?.params)===null||o===void 0?void 0:o.apikey;u&&(this.accessToken=u,this.apiKey=u),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=r?.encode?r.encode:(c,h)=>h(JSON.stringify(c)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Lm){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ko(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(()=>bo(il())).then(({default:n})=>{this.conn=new n(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(n,r){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(n){let r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){let n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case en.connecting:return Wt.Connecting;case en.open:return Wt.Open;case en.closing:return Wt.Closing;default:return Wt.Closed}}isConnected(){return this.connectionState()===Wt.Open}channel(n,r={config:{}}){let o=new Un(`realtime:${n}`,r,this);return this.channels.push(o),o}push(n){let{topic:r,event:o,payload:u,ref:c}=n,h=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${o} (${c})`,u),this.isConnected()?h():this.sendBuffer.push(h)}setAuth(n){this.accessToken=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n}),r.joinedOnce&&r._isJoined()&&r._push(Fe.access_token,{access_token:n})})}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r._joinRef()!==n._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:el}))}_onConnMessage(n){this.decode(n.data,r=>{let{topic:o,event:u,payload:c,ref:h}=r;(h&&h===this.pendingHeartbeatRef||u===c?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${o} ${u} ${h&&"("+h+")"||""}`,c),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(u,c,h)),this.stateChangeCallbacks.message.forEach(p=>p(r))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(n=>n())}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(n))}_onConnError(n){this.log("transport",n.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(Fe.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;let o=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${o}${u}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_sendHeartbeat(){var n;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(n=this.conn)===null||n===void 0||n.close(tl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}},Ko=class{constructor(n,r,o){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=en.connecting,this.send=()=>{},this.url=null,this.url=n,this.close=o.close}};var Mn=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function ve(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var ji=class extends Mn{constructor(n,r){super(n),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},wr=class extends Mn{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}};var km=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},Bi=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>Promise.resolve().then(()=>(Bt(),In)).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)},sl=()=>km(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>(Bt(),In))).Response:Response});var Nn=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},Jo=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Pm=(s,n)=>Nn(void 0,void 0,void 0,function*(){let r=yield sl();s instanceof r?s.json().then(o=>{n(new ji(Jo(o),s.status||500))}).catch(o=>{n(new wr(Jo(o),o))}):n(new wr(Jo(s),s))}),$m=(s,n,r,o)=>{let u={method:s,headers:n?.headers||{}};return s==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};function Wi(s,n,r,o,u,c){return Nn(this,void 0,void 0,function*(){return new Promise((h,p)=>{s(r,$m(n,o,u,c)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>Pm(g,p))})})}function yr(s,n,r,o){return Nn(this,void 0,void 0,function*(){return Wi(s,"GET",n,r,o)})}function dt(s,n,r,o,u){return Nn(this,void 0,void 0,function*(){return Wi(s,"POST",n,o,u,r)})}function ol(s,n,r,o,u){return Nn(this,void 0,void 0,function*(){return Wi(s,"PUT",n,o,u,r)})}function Hi(s,n,r,o,u){return Nn(this,void 0,void 0,function*(){return Wi(s,"DELETE",n,o,u,r)})}var Ve=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},Um={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},al={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},br=class{constructor(n,r={},o,u){this.url=n,this.headers=r,this.bucketId=o,this.fetch=Bi(u)}uploadOrUpdate(n,r,o,u){return Ve(this,void 0,void 0,function*(){try{let c,h=Object.assign(Object.assign({},al),u),p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.append("cacheControl",h.cacheControl)):(c=o,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);let g=this._removeEmptyFolders(r),v=this._getFinalPath(g),m=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:n,body:c,headers:p},h?.duplex?{duplex:h.duplex}:{})),S=yield m.json();return m.ok?{data:{path:g,id:S.Id,fullPath:S.Key},error:null}:{data:null,error:S}}catch(c){if(ve(c))return{data:null,error:c};throw c}})}upload(n,r,o){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,o)})}uploadToSignedUrl(n,r,o,u){return Ve(this,void 0,void 0,function*(){let c=this._removeEmptyFolders(n),h=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",r);try{let g,v=Object.assign({upsert:al.upsert},u),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",v.cacheControl)):(g=o,m["cache-control"]=`max-age=${v.cacheControl}`,m["content-type"]=v.contentType);let S=yield this.fetch(p.toString(),{method:"PUT",body:g,headers:m}),O=yield S.json();return S.ok?{data:{path:c,fullPath:O.Key},error:null}:{data:null,error:O}}catch(g){if(ve(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n){return Ve(this,void 0,void 0,function*(){try{let r=this._getFinalPath(n),o=yield dt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),u=new URL(this.url+o.url),c=u.searchParams.get("token");if(!c)throw new Mn("No token returned by API");return{data:{signedUrl:u.toString(),path:n,token:c},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}update(n,r,o){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,o)})}move(n,r){return Ve(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r},{headers:this.headers}),error:null}}catch(o){if(ve(o))return{data:null,error:o};throw o}})}copy(n,r){return Ve(this,void 0,void 0,function*(){try{return{data:{path:(yield dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(o){if(ve(o))return{data:null,error:o};throw o}})}createSignedUrl(n,r,o){return Ve(this,void 0,void 0,function*(){try{let u=this._getFinalPath(n),c=yield dt(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:r},o?.transform?{transform:o.transform}:{}),{headers:this.headers}),h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(u){if(ve(u))return{data:null,error:u};throw u}})}createSignedUrls(n,r,o){return Ve(this,void 0,void 0,function*(){try{let u=yield dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:u.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(u){if(ve(u))return{data:null,error:u};throw u}})}download(n,r){return Ve(this,void 0,void 0,function*(){let u=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),h=c?`?${c}`:"";try{let p=this._getFinalPath(n);return{data:yield(yield yr(this.fetch,`${this.url}/${u}/${p}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(ve(p))return{data:null,error:p};throw p}})}getPublicUrl(n,r){let o=this._getFinalPath(n),u=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&u.push(c);let p=typeof r?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(r?.transform||{});g!==""&&u.push(g);let v=u.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${v}`)}}}remove(n){return Ve(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}list(n,r,o){return Ve(this,void 0,void 0,function*(){try{let u=Object.assign(Object.assign(Object.assign({},Um),r),{prefix:n||""});return{data:yield dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},o),error:null}}catch(u){if(ve(u))return{data:null,error:u};throw u}})}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){let r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}};var ul="2.5.5";var cl={"X-Client-Info":`storage-js/${ul}`};var Fn=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},xr=class{constructor(n,r={},o){this.url=n,this.headers=Object.assign(Object.assign({},cl),r),this.fetch=Bi(o)}listBuckets(){return Fn(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}getBucket(n){return Fn(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return Fn(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(ve(o))return{data:null,error:o};throw o}})}updateBucket(n,r){return Fn(this,void 0,void 0,function*(){try{return{data:yield ol(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(ve(o))return{data:null,error:o};throw o}})}emptyBucket(n){return Fn(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}deleteBucket(n){return Fn(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}};var Sr=class extends xr{constructor(n,r={},o){super(n,r,o)}from(n){return new br(this.url,this.headers,n,this.fetch)}};var ll="2.43.4";var Ar="";typeof Deno<"u"?Ar="deno":typeof document<"u"?Ar="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ar="react-native":Ar="node";var Dm={"X-Client-Info":`supabase-js-${Ar}/${ll}`},hl={headers:Dm},fl={schema:"public"},dl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pl={};Bt();var Mm=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},Nm=s=>{let n;return s?n=s:typeof fetch>"u"?n=pr:n=fetch,(...r)=>n(...r)},Fm=()=>typeof Headers>"u"?jo:Headers,gl=(s,n,r)=>{let o=Nm(r),u=Fm();return(c,h)=>Mm(void 0,void 0,void 0,function*(){var p;let g=(p=yield n())!==null&&p!==void 0?p:s,v=new u(h?.headers);return v.has("apikey")||v.set("apikey",s),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),o(c,Object.assign(Object.assign({},h),{headers:v}))})};function _l(s){return s.replace(/\/$/,"")}function vl(s,n){let{db:r,auth:o,realtime:u,global:c}=s,{db:h,auth:p,realtime:g,global:v}=n;return{db:Object.assign(Object.assign({},h),r),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},g),u),global:Object.assign(Object.assign({},v),c)}}var Gi="2.64.2";var ml="http://localhost:9999",wl="supabase.auth.token";var yl={"X-Client-Info":`gotrue-js/${Gi}`},Yo=10;var Er="X-Supabase-Api-Version",Vo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bl(s){return Math.round(Date.now()/1e3)+s}function xl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){let n=Math.random()*16|0;return(s=="x"?n:n&3|8).toString(16)})}var Xe=()=>typeof document<"u",rn={tested:!1,writable:!1},Ht=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rn.tested)return rn.writable;let s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),rn.tested=!0,rn.writable=!0}catch{rn.tested=!0,rn.writable=!1}return rn.writable};function qi(s){let n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,c)=>{n[c]=u})}catch{}return r.searchParams.forEach((o,u)=>{n[u]=o}),n}var zi=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>Promise.resolve().then(()=>(Bt(),In)).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)},Sl=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Xo=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},Rr=async(s,n)=>{let r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ki=async(s,n)=>{await s.removeItem(n)};function jm(s){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",o,u,c,h,p,g,v,m=0;for(s=s.replace("-","+").replace("_","/");m<s.length;)h=n.indexOf(s.charAt(m++)),p=n.indexOf(s.charAt(m++)),g=n.indexOf(s.charAt(m++)),v=n.indexOf(s.charAt(m++)),o=h<<2|p>>4,u=(p&15)<<4|g>>2,c=(g&3)<<6|v,r=r+String.fromCharCode(o),g!=64&&u!=0&&(r=r+String.fromCharCode(u)),v!=64&&c!=0&&(r=r+String.fromCharCode(c));return r}var Tr=class s{constructor(){this.promise=new s.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}};Tr.promiseConstructor=Promise;function Zo(s){let n=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=s.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!n.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");let o=r[1];return JSON.parse(jm(o))}async function Al(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function El(s,n){return new Promise((o,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{let h=await s(c);if(!n(c,null,h)){o(h);return}}catch(h){if(!n(c,h)){u(h);return}}})()})}function Bm(s){return("0"+s.toString(16)).substr(-2)}function Wm(){let n=new Uint32Array(56);if(typeof crypto>"u"){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length,u="";for(let c=0;c<56;c++)u+=r.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(n),Array.from(n,Bm).join("")}async function Hm(s){let r=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(o);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}function Gm(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qm(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;let r=await Hm(s);return Gm(r)}async function sn(s,n,r=!1){let o=Wm(),u=o;r&&(u+="/PASSWORD_RECOVERY"),await Xo(s,`${n}-code-verifier`,u);let c=await qm(o);return[c,o===c?"plain":"s256"]}var zm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tl(s){let n=s.headers.get(Er);if(!n||!n.match(zm))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}var Or=class extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}};function z(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}var Ji=class extends Or{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}};function Rl(s){return z(s)&&s.name==="AuthApiError"}var jn=class extends Or{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}},It=class extends Or{constructor(n,r,o,u){super(n,o,u),this.name=r,this.status=o}},pt=class extends It{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}},Bn=class extends It{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},on=class extends It{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}},an=class extends It{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ir=class extends It{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Wn=class extends It{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}};function Yi(s){return z(s)&&s.name==="AuthRetryableFetchError"}var Cr=class extends It{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}};var Km=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(s);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(s,o[u])&&(r[o[u]]=s[o[u]]);return r},un=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Jm=[502,503,504];async function Ol(s){var n;if(!Sl(s))throw new Wn(un(s),0);if(Jm.includes(s.status))throw new Wn(un(s),s.status);let r;try{r=await s.json()}catch(c){throw new jn(un(c),c)}let o,u=Tl(s);if(u&&u.getTime()>=Vo["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new Cr(un(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[])}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Cr(un(r),s.status,r.weak_password.reasons);throw new Ji(un(r),s.status||500,o)}var Ym=(s,n,r,o)=>{let u={method:s,headers:n?.headers||{}};return s==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};async function J(s,n,r,o){var u;let c=Object.assign({},o?.headers);c[Er]||(c[Er]=Vo["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);let h=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);let p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Vm(s,n,r+p,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function Vm(s,n,r,o,u,c){let h=Ym(n,o,u,c),p;try{p=await s(r,Object.assign({},h))}catch(g){throw console.error(g),new Wn(un(g),0)}if(p.ok||await Ol(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await Ol(g)}}function Ct(s){var n;let r=null;Xm(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=bl(s.expires_in)));let o=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:o},error:null}}function Qo(s){let n=Ct(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=s.weak_password),n}function gt(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function Il(s){return{data:s,error:null}}function Cl(s){let{action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:c}=s,h=Km(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:c},g=Object.assign({},h);return{data:{properties:p,user:g},error:null}}function Ll(s){return s}function Xm(s){return s.access_token&&s.refresh_token&&s.expires_in}var Zm=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(s);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(s,o[u])&&(r[o[u]]=s[o[u]]);return r},cn=class{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=zi(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r="global"){try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(z(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gt})}catch(o){if(z(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{let{options:r}=n,o=Zm(n,["options"]),u=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Cl,redirectTo:r?.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:gt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,u,c,h,p,g;try{let v={nextPage:null,lastPage:0,total:0},m=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Ll});if(m.error)throw m.error;let S=await m.json(),O=(h=m.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(g=(p=m.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return I.length>0&&(I.forEach(C=>{let $=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(C.split(";")[1].split("=")[1]);v[`${F}Page`]=$}),v.total=parseInt(O)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(z(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){try{return await J(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:gt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:gt})}catch(o){if(z(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:gt})}catch(o){if(z(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){try{let{data:r,error:o}=await J(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:o}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(n){try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}};var kl={getItem:s=>Ht()?globalThis.localStorage.getItem(s):null,setItem:(s,n)=>{Ht()&&globalThis.localStorage.setItem(s,n)},removeItem:s=>{Ht()&&globalThis.localStorage.removeItem(s)}};function ea(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}function Pl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ln={debug:!!(globalThis&&Ht()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Lr=class extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}},Vi=class extends Lr{};async function ta(s,n,r){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);let o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),ln.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,u.name);try{return await r()}finally{ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,u.name)}}else{if(n===0)throw ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Vi(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ln.debug)try{let c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}Pl();var Qm={url:ml,storageKey:wl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},kr=30*1e3,$l=3;async function Ul(s,n,r){return await r()}var hn=class s{constructor(n){var r,o;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=s.nextInstanceID,s.nextInstanceID+=1,this.instanceID>0&&Xe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let u=Object.assign(Object.assign({},Qm),n);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new cn({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=zi(u.fetch),this.lock=u.lock||Ul,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:Xe()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=ta:this.lock=Ul,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?u.storage?this.storage=u.storage:Ht()?this.storage=kl:(this.memoryStorage={},this.storage=ea(this.memoryStorage)):(this.memoryStorage={},this.storage=ea(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gi}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{let n=Xe()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",n),n||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:o}=await this._getSessionFromURL(n);if(o)return this._debug("#_initialize()","error detecting session from URL",o),o?.message==="Identity is already linked"||o?.message==="Identity is already linked to another user"?{error:o}:(await this._removeSession(),{error:o});let{session:u,redirectType:c}=r;return this._debug("#_initialize()","detected session in URL",u,"redirect type",c),await this._saveSession(u),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return z(n)?{error:n}:{error:new jn("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,u;try{await this._removeSession();let c=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Ct}),{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};let g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(z(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var r,o,u;try{await this._removeSession();let c;if("email"in n){let{email:m,password:S,options:O}=n,I=null,C=null;this.flowType==="pkce"&&([I,C]=await sn(this.storage,this.storageKey)),c=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O?.emailRedirectTo,body:{email:m,password:S,data:(r=O?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:O?.captchaToken},code_challenge:I,code_challenge_method:C},xform:Ct})}else if("phone"in n){let{phone:m,password:S,options:O}=n;c=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:S,data:(o=O?.data)!==null&&o!==void 0?o:{},channel:(u=O?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:O?.captchaToken}},xform:Ct})}else throw new on("You must provide either an email or phone number and a password");let{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};let g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(z(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{await this._removeSession();let r;if("email"in n){let{email:c,password:h,options:p}=n;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qo})}else if("phone"in n){let{phone:c,password:h,options:p}=n;r=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qo})}else throw new on("You must provide either an email or phone number and a password");let{data:o,error:u}=r;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Bn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,o,u,c;return await this._removeSession(),await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async _exchangeCodeForSession(n){let r=await Rr(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(r??"").split("/"),{data:c,error:h}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Ct});return await Ki(this.storage,`${this.storageKey}-code-verifier`),h?{data:{user:null,session:null,redirectType:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Bn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:h})}async signInWithIdToken(n){await this._removeSession();try{let{options:r,provider:o,token:u,access_token:c,nonce:h}=n,p=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ct}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Bn}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,o,u,c,h;try{if(await this._removeSession(),"email"in n){let{email:p,options:g}=n,v=null,m=null;this.flowType==="pkce"&&([v,m]=await sn(this.storage,this.storageKey));let{error:S}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:m},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:S}}if("phone"in n){let{phone:p,options:g}=n,{data:v,error:m}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=g?.data)!==null&&u!==void 0?u:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:m}}throw new on("You must provide either an email or phone number.")}catch(p){if(z(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var r,o;try{n.type!=="email_change"&&n.type!=="phone_change"&&await this._removeSession();let u,c;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(o=n.options)===null||o===void 0?void 0:o.captchaToken);let{data:h,error:p}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:Ct});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");let g=h.session,v=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(z(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(n){var r,o,u;try{await this._removeSession();let c=null,h=null;return this.flowType==="pkce"&&([c,h]=await sn(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:Il})}catch(c){if(z(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new pt;let{error:u}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:u}})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{n.type!="email_change"&&n.type!="phone_change"&&await this._removeSession();let r=`${this.url}/resend`;if("email"in n){let{email:o,type:u,options:c}=n,{error:h}=await J(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){let{phone:o,type:u,options:c}=n,{data:h,error:p}=await J(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new on("You must provide either an email or phone number and a type")}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){let u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await Rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let o=n.expires_at?n.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.storage.isServer){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get(g,v,m){return!h&&v==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(g,v,m)}})}return{data:{session:n},error:null}}let{session:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:gt}):await this._useSession(async r=>{var o,u,c;let{data:h,error:p}=r;if(p)throw p;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pt}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:gt})})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{let{data:u,error:c}=o;if(c)throw c;if(!u.session)throw new pt;let h=u.session,p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await sn(this.storage,this.storageKey));let{data:v,error:m}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:h.access_token,xform:gt});if(m)throw m;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(z(o))return{data:{user:null},error:o};throw o}}_decodeJWT(n){return Zo(n)}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new pt;let r=Date.now()/1e3,o=r,u=!0,c=null,h=Zo(n.access_token);if(h.exp&&(o=h.exp,u=o<=r),u){let{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};c=p}else{let{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){let{data:h,error:p}=r;if(p)throw p;n=(o=h.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new pt;let{session:u,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n){try{if(!Xe())throw new an("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new an("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!n)throw new Ir("Not a valid PKCE flow url.");let r=qi(window.location.href);if(n){if(!r.code)throw new Ir("No code detected.");let{data:re,error:Z}=await this._exchangeCodeForSession(r.code);if(Z)throw Z;let X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:re.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new an(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:o,provider_refresh_token:u,access_token:c,refresh_token:h,expires_in:p,expires_at:g,token_type:v}=r;if(!c||!p||!h||!v)throw new an("No session defined in URL");let m=Math.round(Date.now()/1e3),S=parseInt(p),O=m+S;g&&(O=parseInt(g));let I=O-m;I*1e3<=kr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${S}s`);let C=O-S;m-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,O,m):m-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",C,O,m);let{data:$,error:F}=await this._getUser(c);if(F)throw F;let H={provider_token:o,provider_refresh_token:u,access_token:c,expires_in:S,expires_at:O,refresh_token:h,token_type:v,user:$.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:H,redirectType:r.type},error:null}}catch(r){if(z(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){let n=qi(window.location.href);return!!(Xe()&&(n.access_token||n.error_description))}async _isPKCEFlow(){let n=qi(window.location.href),r=await Rr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;let{data:u,error:c}=r;if(c)return{error:c};let h=(o=u.session)===null||o===void 0?void 0:o.access_token;if(h){let{error:p}=await this.admin.signOut(h,n);if(p&&!(Rl(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await Ki(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(n){let r=xl(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,u;try{let{data:{session:c},error:h}=r;if(h)throw h;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await sn(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(z(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{let{data:r,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{let{data:o,error:u}=await this._useSession(async c=>{var h,p,g,v,m;let{data:S,error:O}=c;if(O)throw O;let I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",I,{headers:this.headers,jwt:(m=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&m!==void 0?m:void 0})});if(u)throw u;return Xe()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(z(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,u;let{data:c,error:h}=r;if(h)throw h;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let o=Date.now();return await El(async u=>(u>0&&await Al(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ct})),(u,c)=>{let h=200*Math.pow(2,u);return c&&Yi(c)&&Date.now()+h-o<kr})}catch(o){if(this._debug(r,"error",o),z(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),Xe()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let o=await Rr(this.storage,this.storageKey);if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}let u=Math.round(Date.now()/1e3),c=((n=o.expires_at)!==null&&n!==void 0?n:1/0)<u+Yo;if(this._debug(r,`session has${c?"":" not"} expired with margin of ${Yo}s`),c){if(this.autoRefreshToken&&o.refresh_token){let{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),Yi(h)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Tr;let{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new pt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);let p={session:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(u,"error",c),z(c)){let h={session:null,error:c};return Yi(c)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,o=!0){let u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});let c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(g){c.push(g)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Xo(this.storage,this.storageKey,n)}async _removeSession(){this._debug("#_removeSession()"),await Ki(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Xe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),kr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let u=Math.floor((o.expires_at*1e3-n)/kr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${kr}ms, refresh threshold is ${$l} ticks`),u<=$l&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Lr)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){let u=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){let[c,h]=await sn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});u.push(p.toString())}if(o?.queryParams){let c=new URLSearchParams(o.queryParams);u.push(c.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;let{data:u,error:c}=r;return c?{data:null,error:c}:await J(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,u;let{data:c,error:h}=r;if(h)return{data:null,error:h};let{data:p,error:g}=await J(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:n.friendlyName,factor_type:n.factorType,issuer:n.issuer},headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return g?{data:null,error:g}:(!((u=p?.totp)===null||u===void 0)&&u.qr_code&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;let{data:u,error:c}=r;if(c)return{data:null,error:c};let{data:h,error:p}=await J(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;let{data:u,error:c}=r;return c?{data:null,error:c}:await J(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){let{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){let{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};let o=n?.factors||[],u=o.filter(c=>c.factor_type==="totp"&&c.status==="verified");return{data:{all:o,totp:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,o;let{data:{session:u},error:c}=n;if(c)return{data:null,error:c};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let h=this._decodeJWT(u.access_token),p=null;h.aal&&(p=h.aal);let g=p;((o=(r=u.user.factors)===null||r===void 0?void 0:r.filter(S=>S.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");let m=h.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:m},error:null}}))}};hn.nextInstanceID=0;var ew=hn,na=ew;var Xi=class extends na{constructor(n){super(n)}};var tw=function(s,n,r,o){function u(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function p(m){try{v(o.next(m))}catch(S){h(S)}}function g(m){try{v(o.throw(m))}catch(S){h(S)}}function v(m){m.done?c(m.value):u(m.value).then(p,g)}v((o=o.apply(s,n||[])).next())})},Pr=class{constructor(n,r,o){var u,c,h;if(this.supabaseUrl=n,this.supabaseKey=r,!n)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");let p=_l(n);this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,this.functionsUrl=`${p}/functions/v1`;let g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:fl,realtime:pl,auth:Object.assign(Object.assign({},dl),{storageKey:g}),global:hl},m=vl(o??{},v);this.storageKey=(u=m.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(c=m.global.headers)!==null&&c!==void 0?c:{},this.auth=this._initSupabaseAuthClient((h=m.auth)!==null&&h!==void 0?h:{},this.headers,m.global.fetch),this.fetch=gl(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new Pn(`${p}/rest/v1`,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new _r(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Sr(this.storageUrl,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},o={}){return this.rest.rpc(n,r,o)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return tw(this,void 0,void 0,function*(){let{data:o}=yield this.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:o,storage:u,storageKey:c,flowType:h,debug:p},g,v){var m;let S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xi({url:this.authUrl,headers:Object.assign(Object.assign({},S),g),storageKey:c,autoRefreshToken:n,persistSession:r,detectSessionInUrl:o,storage:u,flowType:h,debug:p,fetch:v,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(n){return new Dn(this.realtimeUrl,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o?.access_token)})}_handleTokenChanged(n,r,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?(this.realtime.setAuth(o??null),this.changedAccessToken=o):n==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Dl=(s,n,r)=>new Pr(s,n,r);var Ml="https://gjgplbzgrvzhjoxbwwzi.supabase.co",Nl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdqZ3BsYnpncnZ6aGpveGJ3d3ppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTgwNTE2OTcsImV4cCI6MjAzMzYyNzY5N30.0uiOe510dbt0qU66xlGN52aFzH9QGq9jDFsWtoEmxN0";var nw=Dl(Ml,Nl,{auth:{persistSession:!1}}),Fl=nw;window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{let{data:s}=await Fl.from("face_matching_players").select("*");document.querySelector(".mu-leaderboard").classList.remove("hidden"),Pi(s),Jc(s,Pi);let r=document.querySelector(".loader"),o=document.querySelector(".leaderboard-table");r.classList.add("hidden"),o.classList.remove("hidden");let u=document.querySelector("#to-leaderboard-page");u&&u.classList.add("hidden")});})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
